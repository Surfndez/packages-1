{"readme":"<h1 class=\"title\"><a target=\"_blank\" href=\"https://github.com/Jam3/touches\">touches</a><div class=\"contrib\"></div></h1>\n<p><a href=\"http://github.com/badges/stability-badges\"></a></p>\n<p><a href=\"http://jam3.github.io/touches/\">(click for demo)</a> - <a href=\"http://github.com/Jam3/touches/blob/master/demo.js\">(source)</a></p>\n<p>Normalizes touch and mouse events to provide a simpler interface. Simplest case:</p>\n<pre><code class=\"lang-js\"><div class=\"line\"><span class=\"source js\"><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>get&#xA0;mouse/touch&#xA0;events&#xA0;on&#xA0;window</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>touches</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span><span>(</span><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>on</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>start</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;mouseDown</span><span class=\"meta brace round js\"><span>)</span></span><span>&#xA0;&#xA0;&#xA0;</span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>-&gt;&#xA0;mousedown&#xA0;/&#xA0;touchstart</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>on</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>move</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;mouseMove</span><span class=\"meta brace round js\"><span>)</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>-&gt;&#xA0;mousemove&#xA0;/&#xA0;touchmove</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>on</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>end</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;mouseEnd</span><span class=\"meta brace round js\"><span>)</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>-&gt;&#xA0;mouseup&#xA0;&#xA0;&#xA0;/&#xA0;touchend</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span>&#xA0;</span><span class=\"entity name function js\"><span>mouseDown</span></span><span class=\"punctuation definition parameters begin js\"><span>(</span></span><span class=\"variable parameter function js\"><span>ev</span></span><span class=\"punctuation definition parameters end js\"><span>)</span></span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"punctuation whitespace comment leading js\"><span>&#xA0;&#xA0;</span></span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>recommended&#xA0;to&#xA0;avoid&#xA0;duplicate</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"punctuation whitespace comment leading js\"><span>&#xA0;&#xA0;</span></span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>events&#xA0;when&#xA0;mobile&#xA0;devices&#xA0;support&#xA0;both&#xA0;mouse&#xA0;+&#xA0;touch</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;ev</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>preventDefault</span><span class=\"meta brace round js\"><span>(</span><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta brace curly js\"><span>}</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta delimiter method period js\"><span>.</span><span>.</span><span>.</span></span></span></div>\n</code></pre>\n<p>A common pattern for drag events is to listen for events on a parent element (like the <code>window</code>), and use a different element as the <code>target</code> for client offset calculation. The second argument to the event listener is a <code>[x, y]</code> vector representing the calculated client offset (relative to top left of target element).</p>\n<pre><code class=\"lang-js\"><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;touch&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>touches</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>touch</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"support class js\"><span>window</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span><span>&#xA0;target</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;button&#xA0;</span><span class=\"meta brace curly js\"><span>}</span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>on</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>move</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span>&#xA0;</span><span class=\"punctuation definition parameters begin js\"><span>(</span></span><span class=\"variable parameter function js\"><span>ev</span></span><span class=\"meta object delimiter js\"><span>,</span></span><span>&#xA0;</span><span class=\"variable parameter function js\"><span>position</span></span><span class=\"punctuation definition parameters end js\"><span>)</span></span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"entity name type object js console\"><span>console</span></span><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js console\"><span>log</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>relative&#xA0;pos</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;position</span><span class=\"meta brace square js\"><span>[</span></span><span class=\"constant numeric js\"><span>0</span></span><span class=\"meta brace square js\"><span>]</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;position</span><span class=\"meta brace square js\"><span>[</span></span><span class=\"constant numeric js\"><span>1</span></span><span class=\"meta brace square js\"><span>]</span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta brace curly js\"><span>}</span></span><span class=\"meta brace round js\"><span>)</span></span></span></div>\n</code></pre>\n<p>Another common pattern, especially with drag events, is filtering touch input to a single finger. Below; the events will only get fired for the first finger placed on the screen. Subsequent fingers will be ignored until after the first finger has been lifted. </p>\n<pre><code class=\"lang-js\"><div class=\"line\"><span class=\"source js\"><span>touch</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"support class js\"><span>window</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span><span>&#xA0;target</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;button</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;filtered</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"constant language boolean true js\"><span>true</span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>}</span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>on</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>start</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;dragStart</span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>on</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>move</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;dragMove</span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>on</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>end</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;dragEnd</span><span class=\"meta brace round js\"><span>)</span></span></span></div>\n</code></pre>\n<iframe scrolling=\"no\" seamless=\"seamless\" src=\"http://jam3.github.io/touches/\"></iframe><h2 id=\"usage\">Usage</h2>\n<p><a href=\"https://www.npmjs.com/package/touches\"></a></p>\n<h4 id=\"-emitter-require-touches-element-opt-\"><code>emitter = require(&apos;touches&apos;)([element, opt])</code></h4>\n<p>Creates a new drag emitter by attaching listeners to <code>element</code>, which defaults to <code>window</code>. </p>\n<p>The <code>opt</code> options can be:</p>\n<ul>\n<li><code>target</code> the element to use when calculating the <code>position</code> parameter passed to event listeners. The clientX/clientY of the event will be relative to this target</li>\n<li><code>filtered</code> whether the touch events should be filtered to the first placed finger</li>\n<li><code>type</code> can be a string, either <code>&quot;mouse&quot;</code> or <code>&quot;touch&quot;</code> if listening to only one or the other event is desired. If any other value, will listen for both mouse and touch.</li>\n</ul>\n<p>If the events are not filtered, the <code>position</code> for an event will be the first changed touch associated with the <code>target</code>. </p>\n<h4 id=\"-emitter-disable-\"><code>emitter.disable()</code></h4>\n<p>Disables the events associated with this emitter by removing them from the DOM element. Returns the emitter for chaining.</p>\n<h4 id=\"-emitter-enable-\"><code>emitter.enable()</code></h4>\n<p>Enables the events associated with this emitter by adding them to the DOM element. The emitter is enabled by default. Returns the emitter for chaining.</p>\n<h4 id=\"-emitter-target-\"><code>emitter.target</code></h4>\n<p>The current target for position offset calculation.</p>\n<h4 id=\"-emitter-on-start-listener-\"><code>emitter.on(&apos;start&apos;, listener)</code></h4>\n<h4 id=\"-emitter-on-move-listener-\"><code>emitter.on(&apos;move&apos;, listener)</code></h4>\n<h4 id=\"-emitter-on-end-listener-\"><code>emitter.on(&apos;end&apos;, listener)</code></h4>\n<p>The mousedown/touchstart, mousemove/touchmove, and mouseup/touchend events, respectively. Listeners are called with two parameters: <code>(ev, position)</code> where <code>ev</code> is the event and <code>position</code> is an <code>[x, y]</code> array of the client offset, relative to the target&apos;s top left.</p>\n<h2 id=\"demo\">demo</h2>\n<p>To run the demo from source, first <code>git clone</code> this repo, then:</p>\n<pre><code class=\"lang-sh\"><div class=\"line\"><span class=\"source shell\"><span class=\"support function builtin shell\"><span>cd</span></span><span>&#xA0;touches</span></span></div><div class=\"line\"><span class=\"source shell\"><span>npm&#xA0;install</span></span></div><div class=\"line\"><span class=\"source shell\"><span>npm&#xA0;start</span></span></div>\n</code></pre>\n<p>And open <code>localhost:9966</code> in your browser.</p>\n<p>To generate a distribution bundle: </p>\n<pre><code class=\"lang-sh\"><div class=\"line\"><span class=\"source shell\"><span>npm&#xA0;run&#xA0;build</span></span></div>\n</code></pre>\n<h2 id=\"license\">License</h2>\n<p>MIT, see <a href=\"http://github.com/Jam3/touches/blob/master/LICENSE.md\">LICENSE.md</a> for details.</p>\n"}
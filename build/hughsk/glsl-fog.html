<h1 id="glsl-fog-experimental-http-hughsk-github-io-stability-badges-dist-experimental-svg-http-github-com-hughsk-stability-badges-">glsl-fog <a href="http://github.com/hughsk/stability-badges"></a></h1>
<p>Basic fog functions for GLSL, generic but intended for use with
<a href="http://github.com/chrisdickinson/glslify">glslify</a>.</p>
<h2 id="usage">Usage</h2>
<p><a href="https://nodei.co/npm/glsl-fog"></a></p>
<p>Here&apos;s a hypothetical example of linear fog calculated in a vertex shader:</p>
<pre><code class="lang-glsl"><span class="cp">#define FOG_START 100</span>
<span class="cp">#define FOG_END 500</span>

<span class="k">uniform</span> <span class="k">mat4</span> <span class="n">projection</span><span class="p">;</span>
<span class="k">uniform</span> <span class="k">mat4</span> <span class="n">view</span><span class="p">;</span>
<span class="k">uniform</span> <span class="k">mat4</span> <span class="n">model</span><span class="p">;</span>

<span class="k">attribute</span> <span class="k">vec3</span> <span class="n">position</span><span class="p">;</span>
<span class="k">varying</span> <span class="k">float</span> <span class="n">fogAmount</span><span class="p">;</span>

<span class="cp">#pragma glslify: fog_linear = require(glsl-fog/linear)</span>

<span class="k">void</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">gl_Position</span> <span class="o">=</span> <span class="n">projection</span> <span class="o">*</span> <span class="n">view</span> <span class="o">*</span> <span class="n">model</span> <span class="o">*</span> <span class="k">vec4</span><span class="p">(</span><span class="n">positon</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">);</span>
  <span class="k">float</span> <span class="n">fogDistance</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">gl_Position</span><span class="p">.</span><span class="n">xyz</span><span class="p">);</span>
  <span class="n">fogAmount</span> <span class="o">=</span> <span class="n">fog_linear</span><span class="p">(</span><span class="n">fogDistance</span><span class="p">,</span> <span class="n">FOG_START</span><span class="p">,</span> <span class="n">FOG_END</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
<p>And another (separate) example using exp/exp2 per-pixel fog:</p>
<pre><code class="lang-glsl"><span class="cp">#define FOG_DENSITY 0.05</span>

<span class="k">varying</span> <span class="k">vec4</span> <span class="n">vertexColor</span><span class="p">;</span>

<span class="c1">// Take your pick: these should be usable interchangeably.</span>
<span class="cp">#pragma glslify: fog_exp2 = require(glsl-fog/exp2)</span>
<span class="cp">#pragma glslify: fog_exp = require(glsl-fog/exp)</span>

<span class="k">void</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">float</span> <span class="n">fogDistance</span> <span class="o">=</span> <span class="n">gl_FragCoord</span><span class="p">.</span><span class="n">z</span> <span class="o">/</span> <span class="n">gl_FragCoord</span><span class="p">.</span><span class="n">w</span><span class="p">;</span>
  <span class="k">float</span> <span class="n">fogAmount</span> <span class="o">=</span> <span class="n">fog_exp2</span><span class="p">(</span><span class="n">fogDistance</span><span class="p">,</span> <span class="n">FOG_DENSITY</span><span class="p">);</span>
  <span class="k">const</span> <span class="k">float</span> <span class="n">fogColor</span> <span class="o">=</span> <span class="k">vec4</span><span class="p">(</span><span class="mf">1.0</span><span class="p">);</span> <span class="c1">// white</span>

  <span class="n">gl_FragColor</span> <span class="o">=</span> <span class="n">mix</span><span class="p">(</span><span class="n">vertexColor</span><span class="p">,</span> <span class="n">fogColor</span><span class="p">,</span> <span class="n">fogAmount</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
<h2 id="license">License</h2>
<p>MIT. See <a href="http://github.com/hughsk/glsl-fog/blob/master/LICENSE.md">LICENSE.md</a> for details.</p>

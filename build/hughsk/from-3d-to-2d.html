<h1 id="from-3d-to-2d-stable-http-badges-github-io-stability-badges-dist-stable-svg-http-github-com-badges-stability-badges-">from-3d-to-2d <a href="http://github.com/badges/stability-badges"></a></h1>
<p>Take a transformation matrix like you&apos;re used to constructing with WebGL, and
project arbitrary 3D points onto your 2D screen.</p>
<p>You can use this to take a point in your WebGL scene and get its onscreen
position on the canvas, e.g. to add DOM element overlays, or bootstrapping your
own canvas/SVG.</p>
<h2 id="usage">Usage</h2>
<p><a href="https://nodei.co/npm/from-3d-to-2d/"></a></p>
<h3 id="transform-out-position-matrix-">transform(out, position, matrix)</h3>
<p>Given a 3-element array <code>position</code> and a 16-element array <code>matrix</code>, update
the <code>out</code> array to contain your new 2D points &#x2013; each of them ranging from 0 to</p>
<ol>
<li>For example:</li>
</ol>
<pre><code class="lang-javascript"><span class="kd">var</span> <span class="nx">mat4</span>       <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&apos;gl-matrix&apos;</span><span class="p">).</span><span class="nx">mat4</span>
<span class="kd">var</span> <span class="nx">camera</span>     <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&apos;orbit-camera&apos;</span><span class="p">)()</span>
<span class="kd">var</span> <span class="nx">transform</span>  <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&apos;from-3d-to-2d&apos;</span><span class="p">)</span>

<span class="kd">var</span> <span class="nx">projection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">view</span>       <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">pvMatrix</span>   <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">point</span>      <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="kd">function</span> <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// get your camera/view matrix from something like orbit-camera</span>
  <span class="nx">camera</span><span class="p">.</span><span class="nx">view</span><span class="p">(</span><span class="nx">view</span><span class="p">)</span>

  <span class="c1">// perspective projection</span>
  <span class="nx">mat4</span><span class="p">.</span><span class="nx">perspective</span><span class="p">(</span><span class="nx">projection</span>
    <span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mi">4</span>                  <span class="c1">// field of view</span>
    <span class="p">,</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span> <span class="o">/</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span> <span class="c1">// aspect ratio</span>
    <span class="p">,</span> <span class="mf">0.00001</span>
    <span class="p">,</span> <span class="mi">10000</span>
  <span class="p">)</span>

  <span class="c1">// Combine your matrix transformations into</span>
  <span class="c1">// a single transform by multiplying them together</span>
  <span class="nx">mat4</span><span class="p">.</span><span class="nx">mul</span><span class="p">(</span><span class="nx">pvMatrix</span><span class="p">,</span> <span class="nx">projection</span><span class="p">,</span> <span class="nx">view</span><span class="p">)</span>

  <span class="c1">// get your 2d point from your 3d point:</span>
  <span class="nx">transform</span><span class="p">(</span><span class="nx">point</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="nx">pvMatrix</span><span class="p">)</span>
  <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
  <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="p">}</span>
</code></pre>
<h2 id="see-also">See Also</h2>
<ul>
<li><a href="http://github.com/mikolalysenko/svg-simplicial-complex">svg-simplicial-complex</a></li>
<li><a href="http://github.com/mikolalysenko/orbit-camera">orbit-camera</a></li>
<li><a href="http://github.com/toji/gl-matrix">gl-matrix</a></li>
<li><a href="http://github.com/cgiffard/perspex">perspex</a></li>
</ul>
<h2 id="license">License</h2>
<p>MIT. See <a href="http://github.com/hughsk/from-3d-to-2d/blob/master/LICENSE.md">LICENSE.md</a> for details.</p>

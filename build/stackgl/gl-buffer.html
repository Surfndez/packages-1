<h1 id="gl-buffer">gl-buffer</h1>
<p>A wrapper for WebGL buffer objects.</p>
<iframe scrolling="no" seamless="seamless" src="http://stack.gl/gl-buffer/"></iframe><h1 id="example">Example</h1>
<p><a href="http://stack.gl/gl-buffer">View this demo in your browser</a></p>
<pre><code class="lang-javascript"><span class="kd">var</span> <span class="nx">shell</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;gl-now&quot;</span><span class="p">)()</span>
<span class="kd">var</span> <span class="nx">glslify</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;glslify&quot;</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">createBuffer</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;gl-buffer&quot;</span><span class="p">)</span>

<span class="kd">var</span> <span class="nx">createShader</span> <span class="o">=</span> <span class="nx">glslify</span><span class="p">({</span>
  <span class="nx">vertex</span><span class="o">:</span> <span class="s2">&quot;\</span>
<span class="s2">    attribute vec2 position;\</span>
<span class="s2">    varying vec2 uv;\</span>
<span class="s2">    void main() {\</span>
<span class="s2">      gl_Position = vec4(position, 0.0, 1.0);\</span>
<span class="s2">      uv = position.xy;\</span>
<span class="s2">    }&quot;</span><span class="p">,</span>
  <span class="nx">fragment</span><span class="o">:</span> <span class="s2">&quot;\</span>
<span class="s2">    precision highp float;\</span>
<span class="s2">    uniform float tick;\</span>
<span class="s2">    varying vec2 uv;\</span>
<span class="s2">    void main() {\</span>
<span class="s2">      gl_FragColor = vec4(0.5*(uv+1.0), 0.5*(cos(tick)+1.0), 1.0);\</span>
<span class="s2">    }&quot;</span><span class="p">,</span>
  <span class="nx">inline</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">})</span>

<span class="kd">var</span> <span class="nx">buffer</span><span class="p">,</span> <span class="nx">shader</span>

<span class="nx">shell</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;gl-init&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="nx">shell</span><span class="p">.</span><span class="nx">gl</span>

  <span class="c1">//Create buffer</span>
  <span class="nx">buffer</span> <span class="o">=</span> <span class="nx">createBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

  <span class="c1">//Create shader</span>
  <span class="nx">shader</span> <span class="o">=</span> <span class="nx">createShader</span><span class="p">(</span><span class="nx">gl</span><span class="p">)</span>
  <span class="nx">shader</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">location</span> <span class="o">=</span> <span class="mi">0</span>
<span class="p">})</span>

<span class="nx">shell</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;gl-render&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">gl</span> <span class="o">=</span> <span class="nx">shell</span><span class="p">.</span><span class="nx">gl</span>
  <span class="nx">shader</span><span class="p">.</span><span class="nx">bind</span><span class="p">()</span>
  <span class="nx">buffer</span><span class="p">.</span><span class="nx">bind</span><span class="p">()</span>
  <span class="nx">shader</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">pointer</span><span class="p">()</span>
  <span class="nx">shader</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">tick</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">/</span> <span class="mf">1000.0</span>
  <span class="nx">gl</span><span class="p">.</span><span class="nx">drawArrays</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TRIANGLES</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="p">})</span>
</code></pre>
<p>Output:</p>
<p><img src="http://stack.gl/gl-buffer/screenshot.png"></p>
<h1 id="install">Install</h1>
<pre><code>npm install gl-buffer
</code></pre><h1 id="api">API</h1>
<pre><code class="lang-javascript"><span class="kd">var</span> <span class="nx">createBuffer</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;gl-buffer&quot;</span><span class="p">)</span>
</code></pre>
<h2 id="constructor">Constructor</h2>
<p>The constructor for a GL buffer works as follows:</p>
<h3 id="-var-buffer-createbuffer-gl-data-type-usage-"><code>var buffer = createBuffer(gl[, data, type, usage])</code></h3>
<ul>
<li><code>gl</code> is a WebGL context</li>
<li><code>data</code> is either an integer, an array, a typed array, an array buffer or an ndarray representing the data of the buffer.  Default is <code>0</code></li>
<li><code>type</code> is an optional parameter specifying the type of the webgl buffer.  Default is <code>gl.ARRAY_BUFFER</code>.</li>
<li><code>usage</code> is an optional parameter representing the intended usage for the buffer (in the WebGL sense).  It is not clear this does anything in current WebGL implementations.  Default <code>gl.DYNAMIC_DRAW</code></li>
</ul>
<h2 id="properties">Properties</h2>
<h3 id="-buffer-gl-"><code>buffer.gl</code></h3>
<p>A reference to the buffer&apos;s WebGL context</p>
<h3 id="-buffer-handle-"><code>buffer.handle</code></h3>
<p>A handle to the underlying WebGLBuffer object</p>
<h3 id="-buffer-type-"><code>buffer.type</code></h3>
<p>The type of the buffer (either <code>gl.ARRAY_BUFFER</code> or <code>gl.ELEMENT_ARRAY_BUFFER</code>)</p>
<h3 id="-buffer-length-"><code>buffer.length</code></h3>
<p>The size of the buffer in bytes</p>
<h3 id="-buffer-usage-"><code>buffer.usage</code></h3>
<p>The internal WebGL usage for the buffer.</p>
<h2 id="methods">Methods</h2>
<h3 id="-buffer-bind-"><code>buffer.bind()</code></h3>
<p>Binds the buffer to the appropriate target.  Equivalent to <code>gl.bindBuffer( ... )</code></p>
<h3 id="-buffer-dispose-"><code>buffer.dispose()</code></h3>
<p>Deletes the buffer releasing all associated resources.  Equivalent to <code>gl.deleteBuffer(...)</code></p>
<h3 id="-buffer-update-data-offset-"><code>buffer.update(data[, offset])</code></h3>
<p>Updates the data in the buffer. There are two basic modes to this function.  In the first, it calls <code>gl.bufferSubData</code> to update a portion of the buffer in place, and in the second it calls <code>gl.bufferData</code> to completely resize the buffer.</p>
<ul>
<li><code>data</code> the new data to add to the buffer.  This follows the same semantics as in the constructor.</li>
<li><code>offset</code> the offset <strong>in bytes</strong> to copy data into the buffer from <em>or</em> if unspecified then the buffer is resized by calling <code>gl.bufferData</code> instead of <code>gl.bufferSubData</code>.  Default <code>0</code>.</li>
</ul>
<h2 id="credits">Credits</h2>
<p>(c) 2013-2014 Mikola Lysenko. MIT License</p>

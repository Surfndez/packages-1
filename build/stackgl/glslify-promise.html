<h1 id="glslify-promise"><a target="_blank" href="http://github.com/stackgl/glslify-promise">glslify-promise</a></h1>
<p><a href="http://github.com/badges/stability-badges"></a></p>
<p>A Promise wrapper for glslify, providing a consistent interface between both <a href="http://nodejs.org/">Node.js</a> and
<a href="http://browserify.org/">browserify</a>.</p>
<p>Intended for use with <a href="http://github.com/vorg/pex">Pex</a>.</p>
<h2 id="usage">Usage</h2>
<p><a href="https://nodei.co/npm/glslify-promise/"></a></p>
<h3 id="-promise-glslify-file-options-"><code>promise = glslify(file, [options])</code></h3>
<p>Where <code>file</code> and <code>options</code> accept the same arguments as
the <a href="http://github.com/stackgl/glslify">glslify</a> package.</p>
<p>For example, the following should work out of the box with Node:</p>
<pre><code class="lang-javascript"><span class="kd">var</span> <span class="nx">glslify</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&apos;glslify-promise&apos;</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">promise</span> <span class="o">=</span> <span class="nx">glslify</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">&apos;/shader.glsl&apos;</span><span class="p">)</span>

<span class="nx">promise</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">source</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">source</span><span class="p">)</span> <span class="c1">// your glslified GLSL source!</span>
<span class="p">})</span>
</code></pre>
<p>By adding <code>glslify-promise/transform</code> to your <code>package.json</code>
file, you should be able to do the same in browserify too:</p>
<pre><code class="lang-json"><span class="p">{</span>
  <span class="nt">&quot;browserify&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;transform&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;glslify-pex/transform&quot;</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>Note that like <a href="http://github.com/stackgl/glslify">glslify</a>
and <a href="http://github.com/substack/brfs">brfs</a> file paths need
to be statically determinable, meaning that you can&apos;t use
variables in your require statements. The
following script would produce an error when running with
browserify:</p>
<pre><code class="lang-javascript"><span class="kd">var</span> <span class="nx">glslify</span>  <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&apos;glslify&apos;</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">filename</span> <span class="o">=</span> <span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">&apos;/shader.glsl&apos;</span>

<span class="kd">var</span> <span class="nx">promise</span> <span class="o">=</span> <span class="nx">glslify</span><span class="p">(</span><span class="nx">filename</span><span class="p">)</span>
</code></pre>
<p>Whereas the following is still valid:</p>
<pre><code class="lang-javascript"><span class="kd">var</span> <span class="nx">glslify</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&apos;glslify&apos;</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">promise</span> <span class="o">=</span> <span class="nx">glslify</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">&apos;/shader.glsl&apos;</span><span class="p">)</span>
</code></pre>
<p>Also note that this package is using the native <code>Promise</code> global.
For cross-browser compatibility you&apos;ll want to include the
<a href="http://ghub.io/es6-promise">es6-promise</a> polyfill.</p>
<h2 id="contributing">Contributing</h2>
<p>See <a href="https://github.com/stackgl/contributing">stackgl/contributing</a> for details.</p>
<h2 id="license">License</h2>
<p>MIT. See <a href="http://github.com/stackgl/glslify-promise/blob/master/LICENSE.md">LICENSE.md</a> for details.</p>

<h1 id="gl-texture2d-read-float"><a target="_blank" href="http://github.com/stackgl/gl-texture2d-read-float">gl-texture2d-read-float</a></h1>
<p><a href="http://github.com/badges/stability-badges"></a></p>
<p>Read out the contents of a floating-point
<a href="http://github.com/stackgl/gl-texture2d">gl-texture2d</a>.</p>
<p>This will <em>eventually</em> be supported natively in WebGL
<a href="https://www.khronos.org/opengles/sdk/docs/man31/html/glReadPixels.xhtml">(it&apos;s listed in the OpenGL ES 3 spec)</a>,
but this fills that need until then!</p>
<h2 id="usage">Usage</h2>
<p><a href="https://nodei.co/npm/gl-texture2d-read-float/"></a></p>
<h3 id="-read-gltex2d-done-err-data-"><code>read(glTex2d, done(err, data))</code></h3>
<p>Reads out the contents of <code>glTex2d</code>, which should be an instance of
<code>gl-texture2d</code>. When complete, <code>done(err, data)</code> will be called where <code>data</code> is
a <code>Float32Array</code> containing the resulting floats in the texture.</p>
<pre><code class="lang-javascript"><span class="kr">const</span> <span class="nx">canvas</span>    <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&apos;canvas&apos;</span><span class="p">)</span>
<span class="kr">const</span> <span class="nx">gl</span>        <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&apos;gl-context&apos;</span><span class="p">)(</span><span class="nx">canvas</span><span class="p">)</span>

<span class="kr">const</span> <span class="nx">read</span>      <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&apos;gl-texture2d-read-float&apos;</span><span class="p">)</span>
<span class="kr">const</span> <span class="nx">Texture2d</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&apos;gl-texture2d&apos;</span><span class="p">)</span>
<span class="kr">const</span> <span class="nx">baboon</span>    <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&apos;baboon-image&apos;</span><span class="p">)</span>
<span class="kr">const</span> <span class="nx">assert</span>    <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&apos;assert&apos;</span><span class="p">)</span>

<span class="kr">const</span> <span class="nx">texture</span>  <span class="o">=</span> <span class="nx">baboon</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="nx">baboon</span><span class="p">)</span>

<span class="nx">read</span><span class="p">(</span><span class="nx">texture</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span>

  <span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">baboon</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span>
<span class="p">})</span>
</code></pre>
<p>A few things to note:</p>
<ul>
<li>Right now, this is slow as it requires reading data back from the GPU.
There&apos;s not much that can be done about this for the time being unfortunately.</li>
<li>The data is retrieved synchronously under the hood, but the API has been made
asynchronous in preparation for WebGL&apos;s eventual async <code>readPixels</code> equivalent.</li>
<li>Only <code>gl.RGBA</code>/<code>gl.FLOAT</code> textures are currently supported. Pull requests are,
however, very welcome! :)</li>
</ul>
<h2 id="contributing">Contributing</h2>
<p>See <a href="https://github.com/stackgl/contributing">stackgl/contributing</a> for details.</p>
<h2 id="license">License</h2>
<p>MIT. See <a href="http://github.com/stackgl/gl-texture2d-read-float/blob/master/LICENSE.md">LICENSE.md</a> for details.</p>

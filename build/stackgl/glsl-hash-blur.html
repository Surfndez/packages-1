<h1 id="glsl-hash-blur"><a target="_blank" href="http://github.com/stackgl/glsl-hash-blur">glsl-hash-blur</a></h1>
<p><a href="http://github.com/badges/stability-badges"></a></p>
<p><iframe scrolling="no" seamless="seamless" src="http://stack.gl/glsl-hash-blur/"></iframe></p>
<p>A fast blur effect that uses a random hash to compute the sample offset. This gives a snowy/grainy feel to the blur. When requiring, you must specify a <code>sample</code> function and the <code>iterations</code> (a <code>const</code> or <code>#define</code> integer).</p>
<pre><code class="lang-glsl"><span class="k">vec3</span> <span class="n">tex</span><span class="p">(</span><span class="k">vec2</span> <span class="n">uv</span><span class="p">);</span>

<span class="cp">#pragma glslify: blur = require(&apos;glsl-hash-blur&apos;, sample=tex, iterations=20)</span>

<span class="k">vec3</span> <span class="n">tex</span><span class="p">(</span><span class="k">vec2</span> <span class="n">uv</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">texture2D</span><span class="p">(</span><span class="n">iChannel0</span><span class="p">,</span> <span class="n">uv</span><span class="p">).</span><span class="n">rgb</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">void</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">float</span> <span class="n">aspect</span> <span class="o">=</span> <span class="n">resolution</span><span class="p">.</span><span class="n">x</span> <span class="o">/</span> <span class="n">resolution</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
  <span class="n">gl_FragColor</span><span class="p">.</span><span class="n">rgb</span> <span class="o">=</span> <span class="n">blur</span><span class="p">(</span><span class="n">vUv</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">aspect</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
<p>See <a href="demo.frag">demo.frag</a> for an implementation of a vignette blur.</p>
<p>The effect was inspired by David Hoskins&apos; <a href="https://www.shadertoy.com/view/XdjSRw">ShaderToy</a>.</p>
<p><strong>Note:</strong> Use <code>highp</code> precision for best results on mobile and other low-end devices.</p>
<h2 id="demos">Demos</h2>
<ul>
<li><a href="http://stack.gl/glsl-hash-blur/">applied to a texture</a> </li>
<li><a href="http://glslb.in/s/c1a93844">editable glslbin demo</a></li>
</ul>
<h2 id="usage">Usage</h2>
<p><a href="https://www.npmjs.com/package/glsl-hash-blur"></a></p>
<h4 id="-blur-require-glsl-hash-blur-sample-s-iterations-i-"><code>blur = require(&apos;glsl-hash-blur&apos;, sample=S, iterations=I)</code></h4>
<p>Requires the module with your desired sampling function <code>S</code> and iteration count <code>I</code>. The sample function has the following signature:</p>
<pre><code class="lang-glsl"><span class="k">vec3</span> <span class="n">sample</span><span class="p">(</span><span class="k">in</span> <span class="k">vec2</span> <span class="n">uv</span><span class="p">);</span>
</code></pre>
<h4 id="-vec3-blur-vec2-uv-float-radius-float-aspect-float-offset-"><code>vec3 blur(vec2 uv, float radius[, float aspect[, float offset]])</code></h4>
<p>Using the sample function provided above, this will create a blur using the specified UV coordinates and <code>radius</code> strength. The radius is typically multiplied by texel size, e.g. <code>1.0 / resolution.x</code>. </p>
<p>The <code>aspect</code> (defaults to 1.0) is recommended to produce a more accurate blur; e.g. <code>resolution.x / resolution.y</code>. </p>
<p>The <code>offset</code> is optional (defaults to 0.0). It offsets the uvs during randomization, which can produce a &quot;jitter&quot; effect like moving film noise. </p>
<h2 id="running-from-source">Running From Source</h2>
<p>To build/run the demo from source: </p>
<pre><code class="lang-sh">git clone https://github.com/stackgl/glsl-hash-blur.git
<span class="nb">cd </span>glsl-hash-blur
npm install
</code></pre>
<p>Then run the following to start development:</p>
<pre><code class="lang-sh">npm run start
</code></pre>
<p>And open <a href="">http://localhost:9966/</a>. Changes to the file will trigger a LiveReload event on the page.</p>
<p>To run the production build:</p>
<pre><code class="lang-sh">npm run build
</code></pre>
<h2 id="license">License</h2>
<p>MIT, see <a href="http://github.com/stackgl/glsl-hash-blur/blob/master/LICENSE.md">LICENSE.md</a> for details.</p>

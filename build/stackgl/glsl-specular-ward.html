<h1 id="glsl-specular-ward">glsl-specular-ward</h1>
<p>Computes the anisotropic specularity in the Ward model</p>
<h1 id="example">Example</h1>
<pre><code class="lang-glsl"><span class="cp">#pragma glslify: wardSpec = require(glsl-specular-ward)</span>

<span class="k">uniform</span> <span class="k">vec3</span> <span class="n">eyePosition</span><span class="p">;</span>
<span class="k">uniform</span> <span class="k">vec3</span> <span class="n">lightPosition</span><span class="p">;</span>

<span class="k">uniform</span> <span class="k">float</span> <span class="n">shinyPar</span><span class="p">,</span> <span class="n">shinyPerp</span><span class="p">;</span>

<span class="k">varying</span> <span class="k">vec3</span> <span class="n">surfacePosition</span><span class="p">;</span>
<span class="k">varying</span> <span class="k">vec3</span> <span class="n">surfaceNormal</span><span class="p">;</span>
<span class="k">varying</span> <span class="k">vec3</span> <span class="n">fiberDirection</span><span class="p">;</span>

<span class="k">void</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">//Light and view geometry</span>
  <span class="k">vec3</span> <span class="n">eyeDirection</span> <span class="o">=</span> <span class="n">normalize</span><span class="p">(</span><span class="n">eyePosition</span> <span class="o">-</span> <span class="n">surfacePosition</span><span class="p">);</span>
  <span class="k">vec3</span> <span class="n">lightDirection</span> <span class="o">=</span> <span class="n">normalize</span><span class="p">(</span><span class="n">lightPosition</span> <span class="o">-</span> <span class="n">surfacePosition</span><span class="p">);</span>

  <span class="c1">//Surface properties</span>
  <span class="k">vec3</span> <span class="n">normal</span> <span class="o">=</span> <span class="n">normalize</span><span class="p">(</span><span class="n">surfaceNormal</span><span class="p">);</span>
  <span class="k">vec3</span> <span class="n">fiberPar</span> <span class="o">=</span> <span class="n">normalize</span><span class="p">(</span><span class="n">fiberDirection</span><span class="p">);</span>
  <span class="k">vec3</span> <span class="n">fiberPerp</span> <span class="o">=</span> <span class="n">normalize</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">surfaceNormal</span><span class="p">,</span> <span class="n">fiberDirection</span><span class="p">));</span>

  <span class="c1">//Compute specular power</span>
  <span class="k">float</span> <span class="n">power</span> <span class="o">=</span> <span class="n">wardSpec</span><span class="p">(</span>
    <span class="n">lightDirection</span><span class="p">,</span> 
    <span class="n">viewDirection</span><span class="p">,</span> 
    <span class="n">normal</span><span class="p">,</span> 
    <span class="n">fiberPar</span><span class="p">,</span>
    <span class="n">fiberPerp</span><span class="p">,</span>
    <span class="n">shinyPar</span><span class="p">,</span>
    <span class="n">shinyPerp</span><span class="p">);</span>

  <span class="n">gl_FragColor</span> <span class="o">=</span> <span class="k">vec4</span><span class="p">(</span><span class="n">power</span><span class="p">,</span><span class="n">power</span><span class="p">,</span><span class="n">power</span><span class="p">,</span><span class="mf">1.0</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
<h1 id="usage">Usage</h1>
<p>Install with npm:</p>
<pre><code>npm install glsl-specular-phong
</code></pre><p>Then use with <a href="https://github.com/stackgl/glslify">glslify</a>.</p>
<h1 id="api">API</h1>
<pre><code class="lang-glsl"><span class="cp">#pragma glslify: ward = require(glsl-specular-ward)</span>
</code></pre>
<h5 id="-float-ward-vec3-lightdir-vec3-eyedir-vec3-normal-vec3-fiberparallel-vec3-fiberperpendicular-float-shinyparallel-float-shinyperpendicular-"><code>float ward(vec3 lightDir, vec3 eyeDir, vec3 normal, vec3 fiberParallel, vec3 fiberPerpendicular, float shinyParallel, float shinyPerpendicular)</code></h5>
<p>Computes the specular power in the Phong lighting model.</p>
<ul>
<li><code>lightDir</code> is a <em>unit length</em> <code>vec3</code> pointing from the surface point toward the light</li>
<li><code>eyeDir</code> is a <em>unit length</em> <code>vec3</code> pointing from the surface point toward the camera</li>
<li><code>normal</code> is the <em>unit length</em> surface normal at the sample point</li>
<li><code>fiberParallel</code> is a <em>unit length</em> vector tangent to the surface aligned with the local fiber orientation</li>
<li><code>fiberPerpendicular</code> is a <em>unit length</em> vector tangent to surface aligned with the local fiber orientation</li>
<li><code>shinyParallel</code> is the roughness of the fibers in the parallel direction</li>
<li><code>shinyPerpendicular</code> is the roughness of the fibers in perpendicular direction</li>
</ul>
<p><strong>Returns</strong> A <code>float</code> representing the specular power</p>
<h1 id="license">License</h1>
<p>(c) 2014 Mikola Lysenko. MIT License</p>

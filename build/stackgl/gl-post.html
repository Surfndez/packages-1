<h1 id="gl-post"><a target="_blank" href="http://github.com/stackgl/gl-post">gl-post</a></h1>
<p>


</p>
<p>Simple WebGL post-processing using some pieces from <a href="http://stack.gl/">stackgl</a>.</p>
<p><strong><a href="http://stack.gl/gl-post">check out the demo</a></strong>.</p>
<iframe scrolling="no" seamless="seamless" src="http://stack.gl/gl-post/"></iframe><h2 id="usage">Usage</h2>
<p><a href="https://nodei.co/npm/gl-post/"></a></p>
<p>See the <a href="example">example</a> code for a full usage example.</p>
<h3 id="-post-glpost-gl-shader-opts-"><code>post = glPost(gl, shader, opts={})</code></h3>
<p>Creates a new post-processing instance, where <code>gl</code> is a <code>WebGLContext</code> instance
and <code>shader</code> is a shader instance from either
<a href="http://github.com/mikolalysenko/gl-shader-core">gl-shader-core</a> or
<a href="http://github.com/stackgl/glslify">glslify</a>.</p>
<p>The vertex shader is supplied for you, and available at <code>gl-post/post.vert</code>.
The shader you pass in may also be a function that takes a <code>WebGLContext</code> and
returns a shader instance too, so the following is valid:</p>
<pre><code class="lang-javascript"><span class="kd">var</span> <span class="nx">glslify</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&apos;glslify&apos;</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">glPost</span>  <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&apos;gl-post&apos;</span><span class="p">)</span>

<span class="nx">post</span> <span class="o">=</span> <span class="nx">glPost</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="nx">glslify</span><span class="p">({</span>
    <span class="nx">vert</span><span class="o">:</span> <span class="s1">&apos;gl-post&apos;</span>
  <span class="p">,</span> <span class="nx">frag</span><span class="o">:</span> <span class="s1">&apos;./src/my-shader.frag&apos;</span>
<span class="p">}))</span>
</code></pre>
<p>There are also a few options you can include too:</p>
<ul>
<li><code>minFilter</code>: the texture minification filter to use. Defaults to <code>gl.LINEAR</code>.</li>
<li><code>magFilter</code>: the texture magnification filter to use. Defaults to <code>gl.LINEAR</code>.</li>
<li><code>colorBufferName</code>: the name of your color buffer uniform to use in your
shader. Defaults to <code>colorBuffer</code>.</li>
</ul>
<p>In simple cases, you&apos;ll want to do something like this:</p>
<pre><code class="lang-javascript"><span class="kd">var</span> <span class="nx">glslify</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&apos;glslify&apos;</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">glPost</span>  <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&apos;gl-post&apos;</span><span class="p">)</span>

<span class="nx">post</span> <span class="o">=</span> <span class="nx">glPost</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="nx">glslify</span><span class="p">({</span>
    <span class="nx">vert</span><span class="o">:</span> <span class="s1">&apos;gl-post&apos;</span>
  <span class="p">,</span> <span class="nx">frag</span><span class="o">:</span> <span class="s1">&apos;./src/my-shader.frag&apos;</span>
<span class="p">}))</span>

<span class="kd">function</span> <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">post</span><span class="p">.</span><span class="nx">bind</span><span class="p">()</span>

  <span class="c1">// Note that it&apos;s important you clear your</span>
  <span class="c1">// depth/color buffers for this to work properly :)</span>
  <span class="nx">gl</span><span class="p">.</span><span class="nx">clear</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">COLOR_BUFFER_BIT</span> <span class="o">|</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">DEPTH_BUFFER_BIT</span><span class="p">)</span>
  <span class="nx">gl</span><span class="p">.</span><span class="nx">viewport</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span>

  <span class="c1">// ...draw your scene to the framebuffer here...</span>

  <span class="nx">post</span><span class="p">.</span><span class="nx">draw</span><span class="p">()</span>
<span class="p">}</span>
</code></pre>
<h3 id="-post-shader-"><code>post.shader</code></h3>
<p>The shader you gave <code>gl-post</code> will also be exposed here, for quickly changing
uniform variable values.</p>
<h3 id="-post-bind-"><code>post.bind()</code></h3>
<p>Starts drawing to the post-processing buffer. Anything you do now will not be
immediately drawn to the screen, but instead drawn to an off-screen
<a href="http://github.com/stackgl/gl-fbo">framebuffer</a> for you to draw later using
the post-processing shader.</p>
<p>You should this when you&apos;re ready to start drawing your scene.</p>
<h3 id="-post-draw-"><code>post.draw()</code></h3>
<p>Draws the framebuffer to the screen using your shader, returning your drawing
power to the screen in the process.</p>
<h3 id="-post-unbind-"><code>post.unbind()</code></h3>
<p>Call this if you want to explicitly disable rendering to the framebuffer before
drawing to the screen.</p>
<h2 id="license">License</h2>
<p>MIT. See <a href="http://github.com/stackgl/gl-post/blob/master/LICENSE.md">LICENSE.md</a> for details.</p>

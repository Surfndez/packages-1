<h1 id="glslify-api-experimental-http-badges-github-io-stability-badges-dist-experimental-svg-http-github-com-badges-stability-badges-">glslify-api <a href="http://github.com/badges/stability-badges"></a></h1>
<p>An API and accompanying client for generating
<a href="http://github.com/stackgl/glslify">glslify</a> shaders in the browser.</p>
<p>This is done by running glslify in the browser, but redirecting its functions
to read and resolve modules to a thin server. Files are cached locally
using <a href="https://github.com/maxogden/level.js">level.js</a> to speed up the
bundling speed after the first run &#x2013; it can even work offline after downloading
the required package once!</p>
<p>See the <a href="http://github.com/stackgl/glslify-api/tree/master/example">example</a>
directory for a simple example.</p>
<p><a href="https://nodei.co/npm/glslify-api/"></a></p>
<h2 id="usage-server">Usage: Server</h2>
<h3 id="-handle-api-cachedir-"><code>handle = api([cachedir])</code></h3>
<p>Returns an express-style route handler. <code>cachedir</code> is the location to store
temporary packages (using <a href="http://github.com/hughsk/npm-file">npm-file</a>),
and defaults to <code>.glslify</code>.</p>
<h3 id="-handle-req-res-next-"><code>handle(req, res, next)</code></h3>
<p>Given a request and response pair, handle a route. Will call <code>next</code> if there
is an error or a appropriate route is not found.</p>
<h2 id="usage-browser">Usage: Browser</h2>
<h3 id="-getshader-api-serveruri-options-"><code>getShader = api(serverURI, [options])</code></h3>
<p>Returns a function for compiling shaders within the browser. <code>serverURI</code>
should be the URI where you&apos;re hosting your copy of the <code>glslify-api</code> server &#x2013;
if you don&apos;t pass one in that&apos;s OK too, there&apos;s one being hosted at
<a href="http://glslify.shader.club/">glslify.shader.club</a>.</p>
<p>Available options:</p>
<ul>
<li><code>ttl</code>: the maximum amount of time to cache a file locally, in milliseconds.</li>
</ul>
<h3 id="-getshader-source-done-err-result-"><code>getShader(source, done(err, result))</code></h3>
<p>Pass in a shader body <code>source</code>, and <code>done</code> will be called with either an error
or the glslified shader when ready.</p>
<h2 id="http-api">HTTP API</h2>
<h3 id="-get-"><code>GET /</code></h3>
<p>Should return:</p>
<pre><code class="lang-json"><span class="p">{</span>
  <span class="nt">&quot;glslify&quot;</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span>
</code></pre>
<h3 id="-post-shader-"><code>POST /-/shader</code></h3>
<p>Pipe a whole shader to the request body and get a glslified shader in
return. This is a little more blunt than the approach in the client, but
can be useful for small, quick experiments.</p>
<h3 id="-get-package-file-"><code>GET /:package/:file...</code></h3>
<p>Returns the raw contents of <code>file</code> from the <code>package</code> package on npm.</p>
<h2 id="license">License</h2>
<p>MIT. See <a href="http://github.com/stackgl/glslify-api/blob/master/LICENSE.md">LICENSE.md</a> for details.</p>

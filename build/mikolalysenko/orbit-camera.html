<h1 id="orbit-camera">orbit-camera</h1>
<p>Simple arcball camera built on top of gl-matrix</p>
<h2 id="example">Example</h2>
<pre><code class="lang-javascript"><span class="kd">var</span> <span class="nx">shell</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;gl-now&quot;</span><span class="p">)()</span>
<span class="kd">var</span> <span class="nx">createMesh</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;gl-mesh&quot;</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">glm</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;gl-matrix&quot;</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">mat4</span> <span class="o">=</span> <span class="nx">glm</span><span class="p">.</span><span class="nx">mat4</span>
<span class="kd">var</span> <span class="nx">simple3DShader</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;simple-3d-shader&quot;</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">createOrbitCamera</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;orbit-camera&quot;</span><span class="p">)</span>

<span class="kd">var</span> <span class="nx">camera</span> <span class="o">=</span> <span class="nx">createOrbitCamera</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span>
                               <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                               <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>

<span class="kd">var</span> <span class="nx">shader</span><span class="p">,</span> <span class="nx">mesh</span>

<span class="nx">shell</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;gl-init&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">shader</span> <span class="o">=</span> <span class="nx">simple3DShader</span><span class="p">(</span><span class="nx">shell</span><span class="p">.</span><span class="nx">gl</span><span class="p">)</span>
  <span class="nx">mesh</span> <span class="o">=</span> <span class="nx">createMesh</span><span class="p">(</span><span class="nx">shell</span><span class="p">.</span><span class="nx">gl</span><span class="p">,</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;bunny&quot;</span><span class="p">))</span>
<span class="p">})</span>

<span class="nx">shell</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;gl-render&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">shader</span><span class="p">.</span><span class="nx">bind</span><span class="p">()</span>

  <span class="kd">var</span> <span class="nx">scratch</span> <span class="o">=</span> <span class="nx">mat4</span><span class="p">.</span><span class="nx">create</span><span class="p">()</span>
  <span class="nx">shader</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">model</span> <span class="o">=</span> <span class="nx">scratch</span>
  <span class="nx">shader</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">projection</span> <span class="o">=</span> <span class="nx">mat4</span><span class="p">.</span><span class="nx">perspective</span><span class="p">(</span><span class="nx">scratch</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="o">/</span><span class="mf">4.0</span><span class="p">,</span> <span class="nx">shell</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="nx">shell</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">1000.0</span><span class="p">)</span>
  <span class="nx">shader</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">view</span> <span class="o">=</span> <span class="nx">camera</span><span class="p">.</span><span class="nx">view</span><span class="p">(</span><span class="nx">scratch</span><span class="p">)</span>

  <span class="nx">mesh</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">shader</span><span class="p">)</span>
  <span class="nx">mesh</span><span class="p">.</span><span class="nx">draw</span><span class="p">()</span>
  <span class="nx">mesh</span><span class="p">.</span><span class="nx">unbind</span><span class="p">()</span>
<span class="p">})</span>

<span class="nx">shell</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;tick&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">shell</span><span class="p">.</span><span class="nx">wasDown</span><span class="p">(</span><span class="s2">&quot;mouse-left&quot;</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">camera</span><span class="p">.</span><span class="nx">rotate</span><span class="p">([</span><span class="nx">shell</span><span class="p">.</span><span class="nx">mouseX</span><span class="o">/</span><span class="nx">shell</span><span class="p">.</span><span class="nx">width</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="nx">shell</span><span class="p">.</span><span class="nx">mouseY</span><span class="o">/</span><span class="nx">shell</span><span class="p">.</span><span class="nx">height</span><span class="o">-</span><span class="mf">0.5</span><span class="p">],</span>
                  <span class="p">[</span><span class="nx">shell</span><span class="p">.</span><span class="nx">prevMouseX</span><span class="o">/</span><span class="nx">shell</span><span class="p">.</span><span class="nx">width</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="nx">shell</span><span class="p">.</span><span class="nx">prevMouseY</span><span class="o">/</span><span class="nx">shell</span><span class="p">.</span><span class="nx">height</span><span class="o">-</span><span class="mf">0.5</span><span class="p">])</span>
  <span class="p">}</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">shell</span><span class="p">.</span><span class="nx">wasDown</span><span class="p">(</span><span class="s2">&quot;mouse-right&quot;</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">camera</span><span class="p">.</span><span class="nx">pan</span><span class="p">([</span><span class="mi">10</span><span class="o">*</span><span class="p">(</span><span class="nx">shell</span><span class="p">.</span><span class="nx">mouseX</span><span class="o">-</span><span class="nx">shell</span><span class="p">.</span><span class="nx">prevMouseX</span><span class="p">)</span><span class="o">/</span><span class="nx">shell</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>
                <span class="mi">10</span><span class="o">*</span><span class="p">(</span><span class="nx">shell</span><span class="p">.</span><span class="nx">mouseY</span> <span class="o">-</span> <span class="nx">shell</span><span class="p">.</span><span class="nx">prevMouseY</span><span class="p">)</span><span class="o">/</span><span class="nx">shell</span><span class="p">.</span><span class="nx">height</span><span class="p">])</span>
  <span class="p">}</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">shell</span><span class="p">.</span><span class="nx">scroll</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">{</span>
    <span class="nx">camera</span><span class="p">.</span><span class="nx">zoom</span><span class="p">(</span><span class="nx">shell</span><span class="p">.</span><span class="nx">scroll</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mf">0.1</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre>
<h2 id="install">Install</h2>
<pre><code>npm install orbit-camera
</code></pre><h2 id="api">API</h2>
<pre><code class="lang-javascript"><span class="kd">var</span> <span class="nx">createOrbitCamera</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;orbit-camera&quot;</span><span class="p">)</span>
</code></pre>
<h3 id="-var-camera-createorbitcamera-eye-center-up-"><code>var camera = createOrbitCamera(eye, center, up)</code></h3>
<p>Creates an orbit camera looking at <code>center</code>.  This has the same semantics as <code>gluLookAt</code></p>
<ul>
<li><code>eye</code> is the eye vector of the camera</li>
<li><code>center</code> is the target the camera is looking at</li>
<li><code>up</code> is the up direction for the camera</li>
</ul>
<p><strong>Returns</strong> A new orbit camera object</p>
<h3 id="-camera-lookat-eye-center-up-"><code>camera.lookAt(eye, center, up)</code></h3>
<p>Move the camera to look at the new position.</p>
<h3 id="-camera-pan-translation-"><code>camera.pan(translation)</code></h3>
<p>Moves the center of the camera by <code>translation</code>.  Note that translation must be an array of length either 2 or 3</p>
<h3 id="-camera-rotate-cur-prev-"><code>camera.rotate(cur, prev)</code></h3>
<p>Applies a rotation to the camera.  <code>cur</code> and <code>prev</code> are the state of the previous locations.  These can be pairs of 2D arrays representing the mouse coordinates in distance relative to the center of the sceen.</p>
<h3 id="-camera-zoom-delta-"><code>camera.zoom(delta)</code></h3>
<p>Zooms in or out by some amount</p>
<h3 id="-camera-view-out-"><code>camera.view([out])</code></h3>
<p>Returns the current view matrix associated to the camera</p>
<h2 id="credits">Credits</h2>
<p>(c) 2013 Mikola Lysenko. MIT License</p>

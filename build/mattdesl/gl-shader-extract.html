<h1 id="gl-shader-extract"><a target="_blank" href="http://github.com/mattdesl/gl-shader-extract">gl-shader-extract</a></h1>
<p><a href="http://github.com/badges/stability-badges"></a></p>
<p>Extracts active uniforms and attributes from a compiled WebGLProgram at runtime and normalizes their types to match GLSL syntax.</p>
<p>For an offline version, see <a href="https://www.npmjs.com/package/glsl-extract">glsl-extract</a>. </p>
<h2 id="example">Example</h2>
<pre><code class="lang-js"><span class="kd">var</span> <span class="nx">extract</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&apos;gl-shader-extract&apos;</span><span class="p">)</span>

<span class="kd">var</span> <span class="nx">fragSource</span> <span class="o">=</span> <span class="s1">&apos;void main()&apos;</span>
<span class="kd">var</span> <span class="nx">vertSource</span> <span class="o">=</span> <span class="err">`</span>
  <span class="nx">attribute</span> <span class="nx">vec4</span> <span class="nx">position</span><span class="p">;</span>
  <span class="nx">uniform</span> <span class="nx">mat4</span> <span class="nx">projection</span><span class="p">;</span>
  <span class="k">void</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span> 
    <span class="nx">gl_Position</span> <span class="o">=</span> <span class="nx">projection</span> <span class="o">*</span> <span class="nx">position</span><span class="p">;</span>
  <span class="p">}</span>
<span class="err">`</span>

<span class="c1">//compile the source into a WebGLProgram object</span>
<span class="kd">var</span> <span class="nx">program</span> <span class="o">=</span> <span class="p">...</span>

<span class="c1">//get the uniforms and attributes</span>
<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">extract</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="nx">program</span><span class="p">)</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">attributes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> 
<span class="c1">// { type: &quot;vec4&quot;, name: &apos;position&apos; }</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> 
<span class="c1">// { type: &quot;mat4&quot;, name: &apos;projection&apos; }</span>
</code></pre>
<h2 id="usage">Usage</h2>
<p><a href="https://www.npmjs.com/package/gl-shader-extract"></a></p>
<h3 id="install">Install</h3>
<pre><code class="lang-sh">npm install gl-shader-extract --save
</code></pre>
<h3 id="api">API</h3>
<h4 id="-data-extract-gl-program-"><code>data = extract(gl, program)</code></h4>
<p>Extracts the <code>type</code> and <code>name</code> from each uniform/attribute that was active in the shader. The returned <code>data</code> looks like this:</p>
<pre><code class="lang-js"><span class="p">{</span>
  <span class="nx">attributes</span><span class="o">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&apos;position&apos;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&apos;vec4&apos;</span> <span class="p">}</span> <span class="p">],</span>
  <span class="nx">uniforms</span><span class="o">:</span> <span class="p">[</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&apos;projection&apos;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&apos;mat4&apos;</span> <span class="p">}</span> <span class="p">]</span>
<span class="p">}</span>
</code></pre>
<h4 id="-uniforms-extract-uniforms-gl-program-"><code>uniforms = extract.uniforms(gl, program)</code></h4>
<p>As above, but only extracts the <code>uniforms</code> array.</p>
<h4 id="-attributes-extract-attributes-gl-program-"><code>attributes = extract.attributes(gl, program)</code></h4>
<p>As above, but only extracts the <code>attributes</code> array.</p>
<h3 id="type-mapping">Type Mapping</h3>
<table>
<thead>
<tr>
<th>getProgramParameter</th>
<th>normalized</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>FLOAT_VEC2</code></td>
<td><code>vec2</code></td>
</tr>
<tr>
<td><code>FLOAT_VEC3</code></td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>FLOAT_VEC4</code></td>
<td><code>vec4</code></td>
</tr>
<tr>
<td><code>INT</code></td>
<td><code>int</code></td>
</tr>
<tr>
<td><code>INT_VEC2</code></td>
<td><code>ivec2</code></td>
</tr>
<tr>
<td><code>INT_VEC3</code></td>
<td><code>ivec3</code></td>
</tr>
<tr>
<td><code>INT_VEC4</code></td>
<td><code>ivec4</code></td>
</tr>
<tr>
<td><code>BOOL</code></td>
<td><code>bool</code></td>
</tr>
<tr>
<td><code>BOOL_VEC2</code></td>
<td><code>bvec2</code></td>
</tr>
<tr>
<td><code>BOOL_VEC3</code></td>
<td><code>bvec3</code></td>
</tr>
<tr>
<td><code>BOOL_VEC4</code></td>
<td><code>bvec4</code></td>
</tr>
<tr>
<td><code>FLOAT_MAT2</code></td>
<td><code>mat2</code></td>
</tr>
<tr>
<td><code>FLOAT_MAT3</code></td>
<td><code>mat3</code></td>
</tr>
<tr>
<td><code>FLOAT_MAT4</code></td>
<td><code>mat4</code></td>
</tr>
<tr>
<td><code>SAMPLER_2D</code></td>
<td><code>sampler2D</code></td>
</tr>
<tr>
<td><code>SAMPLER_CUBE</code></td>
<td><code>samplerCube</code></td>
</tr>
</tbody>
</table>
<h2 id="credits">Credits</h2>
<p>This was pulled out from @mikolalysenko&apos;s <a href="https://www.npmjs.com/package/gl-shader">gl-shader</a> for use in other engines/frameworks.</p>
<h2 id="license">License</h2>
<p>MIT, see <a href="http://github.com/mattdesl/gl-shader-extract/blob/master/LICENSE.md">LICENSE.md</a> for details.</p>

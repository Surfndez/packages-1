<h1 id="three-glslify"><a target="_blank" href="http://github.com/mattdesl/three-glslify">three-glslify</a></h1>
<p><a href="http://github.com/badges/stability-badges"></a></p>
<p>A helper to turn <a href="https://github.com/stackgl/glslify">glslify</a> shader into a ThreeJS shader object. </p>
<p>Typical example:</p>
<pre><code class="lang-js"><span class="kd">var</span> <span class="nx">THREE</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&apos;three&apos;</span><span class="p">)</span>

<span class="c1">//inline our shader code</span>
<span class="kd">var</span> <span class="nx">glslify</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&apos;glslify&apos;</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="nx">glslify</span><span class="p">({</span>
    <span class="nx">vertex</span><span class="o">:</span> <span class="s1">&apos;./foo.vert&apos;</span><span class="p">,</span>
    <span class="nx">fragment</span><span class="o">:</span> <span class="s1">&apos;./foo.frag&apos;</span><span class="p">,</span>
    <span class="nx">sourceOnly</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">})</span>

<span class="c1">//create a shader that ThreeJS will recognize</span>
<span class="kd">var</span> <span class="nx">createShader</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&apos;three-glslify&apos;</span><span class="p">)(</span><span class="nx">THREE</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">myShader</span> <span class="o">=</span> <span class="nx">createShader</span><span class="p">(</span><span class="nx">source</span><span class="p">)</span>

<span class="c1">//we can now use it in ShaderMaterial or EffectComposer</span>
<span class="kd">var</span> <span class="nx">pass</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">ShaderPass</span><span class="p">(</span> <span class="nx">myShader</span> <span class="p">)</span>
<span class="nx">effectComposer</span><span class="p">.</span><span class="nx">addPass</span><span class="p">(</span><span class="nx">pass</span><span class="p">)</span>
</code></pre>
<p>The returned <code>myShader</code> object looks like this, with new instances of Texture, Vector2, etc. based on the uniform type. Attributes start with empty arrays. </p>
<pre><code class="lang-js"><span class="p">{</span>
    <span class="nx">vertexShader</span><span class="o">:</span> <span class="s1">&apos;... source ...&apos;</span><span class="p">,</span>
    <span class="nx">fragmentShader</span><span class="o">:</span> <span class="s1">&apos;... source ...&apos;</span><span class="p">,</span>
    <span class="nx">uniforms</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">u_tex0</span><span class="o">:</span> <span class="p">{</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&apos;t&apos;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Texture</span><span class="p">()</span> <span class="p">},</span>
        <span class="p">...</span> <span class="nx">etc</span>
    <span class="p">},</span>
    <span class="nx">attributes</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">displacement</span><span class="o">:</span> <span class="p">{</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&apos;f&apos;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="p">[]</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h2 id="usage">Usage</h2>
<p><a href="https://nodei.co/npm/three-glslify/"></a></p>
<h3 id="-createshader-source-options-"><code>createShader(source, options)</code></h3>
<p>Creates a shader with the given source (from glslify, using <code>sourceOnly</code>) and options.</p>
<p>Options:</p>
<ul>
<li><code>colors</code> an array of uniform names that should be mapped to THREE.Color typed, <code>&apos;c&apos;</code>. Otherwise these will just be plain THREE.Vector3 types, <code>v3</code></li>
</ul>
<h2 id="gotchas">Gotchas</h2>
<p>Since ThreeJS release cycles are unpredictable and don&apos;t use semantic versioning, this module may break with newer versions of ThreeJS. It currently works with three 0.68.0 (r68). Send issues or PRs if you find versioning problems.</p>
<p>ThreeJS distinguishes between an array of THREE.Vector3 objects, and a flattened <code>vec3</code> type represented by floats (<code>v3v</code> vs <code>fv</code>). This module only sees the <code>vec3</code> array type, and assumes they are to be represented by an array of THREE.Vector3 elements. Same with <code>ivec3</code>, <code>vec4</code>, etc. </p>
<h2 id="license">License</h2>
<p>MIT, see <a href="http://github.com/mattdesl/three-glslify/blob/master/LICENSE.md">LICENSE.md</a> for details.</p>

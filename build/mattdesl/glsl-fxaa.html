<h1 id="glsl-fxaa">glsl-fxaa</h1>
<p><a href="http://github.com/badges/stability-badges"></a></p>
<p>A WebGL implementation of Fast Approximate Anti-Aliasing (FXAA v2). This is a screen-space technique. The code was originally from <a href="http://www.geeks3d.com/20110405/fxaa-fast-approximate-anti-aliasing-demo-glsl-opengl-test-radeon-geforce/">Geeks3D.com</a> and cleaned up by <a href="https://github.com/mitsuhiko/webgl-meincraft">Armin Ronacher</a> for WebGL. </p>
<p>FXAA is particularly useful in WebGL since most browsers do not currently support MSAA, and even those that do (e.g. Chrome) will not support it outside of the main frame buffer (which is common when doing post-processing effects like color grading).</p>
<h2 id="usage">Usage</h2>
<p><a href="https://nodei.co/npm/glsl-fxaa/"></a></p>
<h4 id="-vec4-fxaa-sampler2d-tex-vec2-fragcoord-vec2-resolution-"><code>vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution)</code></h4>
<p>Returns the anti-aliased color from your frame texture. </p>
<p>Inside GLSL fragment shader:</p>
<pre><code class="lang-glsl"><span class="cp">#pragma glslify: fxaa = require(glsl-fxaa)</span>

<span class="k">uniform</span> <span class="k">vec2</span> <span class="n">resolution</span><span class="p">;</span>

<span class="k">void</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">vec2</span> <span class="n">fragCoord</span> <span class="o">=</span> <span class="n">v_texCoord0</span> <span class="o">*</span> <span class="n">resolution</span><span class="p">;</span>
    <span class="n">gl_FragColor</span> <span class="o">=</span> <span class="n">fxaa</span><span class="p">(</span><span class="n">u_texture0</span><span class="p">,</span> <span class="n">fragCoord</span><span class="p">,</span> <span class="n">resolution</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
<h3 id="optimizing">optimizing</h3>
<p>If you plan on using FXAA instead of native anti-aliasing (i.e. for post-processed 3D scenes), disabling native AA when creating your WebGL context should give you a performance boost in some browsers.</p>
<p>This FXAA shader uses 9 dependent texture reads. For various mobile GPUs (particularly iOS), we can optimize the shader by making 5 of the texture2D calls non-dependent. To do this, the coordinates have to be computed in the vertex shader and passed along:</p>
<p>vert shader:</p>
<pre><code class="lang-glsl"><span class="k">varying</span> <span class="k">vec2</span> <span class="n">v_rgbNW</span><span class="p">;</span>
<span class="k">varying</span> <span class="k">vec2</span> <span class="n">v_rgbNE</span><span class="p">;</span>
<span class="k">varying</span> <span class="k">vec2</span> <span class="n">v_rgbSW</span><span class="p">;</span>
<span class="k">varying</span> <span class="k">vec2</span> <span class="n">v_rgbSE</span><span class="p">;</span>
<span class="k">varying</span> <span class="k">vec2</span> <span class="n">v_rgbM</span><span class="p">;</span>

<span class="k">uniform</span> <span class="k">vec2</span> <span class="n">resolution</span><span class="p">;</span>

<span class="cp">#pragma glslify: texcoords = require(glsl-fxaa/texcoords.glsl)</span>

<span class="k">void</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="c1">//compute the texture coords and store them in varyings</span>
   <span class="k">vec2</span> <span class="n">fragCoord</span> <span class="o">=</span> <span class="n">vTexCoord0</span> <span class="o">*</span> <span class="n">resolution</span><span class="p">;</span>
   <span class="n">texcoords</span><span class="p">(</span><span class="n">fragCoord</span><span class="p">,</span> <span class="n">resolution</span><span class="p">,</span> <span class="n">v_rgbNW</span><span class="p">,</span> <span class="n">v_rgbNE</span><span class="p">,</span> <span class="n">v_rgbSW</span><span class="p">,</span> <span class="n">v_rgbSE</span><span class="p">,</span> <span class="n">v_rgbM</span><span class="p">);</span>

   <span class="c1">//.. rest of shader</span>
<span class="p">}</span>
</code></pre>
<p>frag shader:</p>
<pre><code class="lang-glsl"><span class="k">varying</span> <span class="k">vec2</span> <span class="n">v_rgbNW</span><span class="p">;</span>
<span class="k">varying</span> <span class="k">vec2</span> <span class="n">v_rgbNE</span><span class="p">;</span>
<span class="k">varying</span> <span class="k">vec2</span> <span class="n">v_rgbSW</span><span class="p">;</span>
<span class="k">varying</span> <span class="k">vec2</span> <span class="n">v_rgbSE</span><span class="p">;</span>
<span class="k">varying</span> <span class="k">vec2</span> <span class="n">v_rgbM</span><span class="p">;</span>

<span class="k">uniform</span> <span class="k">vec2</span> <span class="n">resolution</span><span class="p">;</span>

<span class="cp">#pragma glslify: fxaa = require(glsl-fxaa/fxaa.glsl)</span>

<span class="k">void</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//can also use gl_FragCoord.xy</span>
    <span class="k">vec2</span> <span class="n">fragCoord</span> <span class="o">=</span> <span class="n">vTexCoord0</span> <span class="o">*</span> <span class="n">resolution</span><span class="p">;</span> 

    <span class="n">gl_FragColor</span> <span class="o">=</span> <span class="n">fxaa</span><span class="p">(</span><span class="n">u_texture0</span><span class="p">,</span> <span class="n">fragCoord</span><span class="p">,</span> <span class="n">resolution</span><span class="p">,</span> <span class="n">v_rgbNW</span><span class="p">,</span> <span class="n">v_rgbNE</span><span class="p">,</span> <span class="n">v_rgbSW</span><span class="p">,</span> <span class="n">v_rgbSE</span><span class="p">,</span> <span class="n">v_rgbM</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
<p>In most cases, you should just use the simplest <code>index.glsl</code> use case demonstrated earlier. </p>
<h2 id="demo">demo</h2>
<p>See the <a href="demo/">demo</a> folder. To run with beefy:</p>
<p><code>beefy demo/index.js --open</code></p>
<h2 id="license">License</h2>
<p>MIT, see <a href="http://github.com/mattdesl/glsl-fxaa/blob/master/LICENSE.md">LICENSE.md</a> for details.</p>

<p><a href="https://ci.testling.com/mattdesl/gl-basic-shader"><img src="https://ci.testling.com/mattdesl/gl-basic-shader.png" alt="browser support"></a></p>
<h1 id="gl-basic-shader"><a target="_blank" href="http://github.com/mattdesl/gl-basic-shader">gl-basic-shader</a></h1>
<p><a href="http://github.com/badges/stability-badges"></a></p>
<p>Generates and compiles a basic shader with some common attributes and uniforms and a Model, View, Projection vertex transform. Also includes a <a href="#cli">command-line interface</a></p>
<pre><code class="lang-js"><span class="kd">var</span> <span class="nx">createShader</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&apos;gl-basic-shader&apos;</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">shader</span> <span class="o">=</span> <span class="nx">createShader</span><span class="p">(</span><span class="nx">gl</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">texcoord</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>    <span class="c1">//vertex texcoords</span>
    <span class="nx">normal</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>     <span class="c1">//vertex normals</span>
    <span class="nx">color</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>       <span class="c1">//vertex colors</span>
    <span class="nx">tint</span><span class="o">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="c1">//uniform color tint</span>
<span class="p">})</span>

<span class="c1">//do some stuff with it</span>
<span class="nx">shader</span><span class="p">.</span><span class="nx">bind</span><span class="p">()</span>
<span class="nx">shader</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">.</span><span class="nx">texture0</span> <span class="o">=</span> <span class="mi">0</span>
<span class="nx">shader</span><span class="p">.</span><span class="nx">attribuets</span><span class="p">.</span><span class="nx">texcoord0</span><span class="p">.</span><span class="nx">pointer</span><span class="p">()</span> 
<span class="nx">shader</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">pointer</span><span class="p">()</span>
</code></pre>
<p>The resulting shader will be compiled with the generated source:</p>
<pre><code class="lang-glsl"><span class="c1">// vertex shader</span>
<span class="k">attribute</span> <span class="k">vec4</span> <span class="n">position</span><span class="p">;</span>
<span class="k">attribute</span> <span class="k">vec4</span> <span class="n">color</span><span class="p">;</span>
<span class="k">attribute</span> <span class="k">vec2</span> <span class="n">texcoord0</span><span class="p">;</span>
<span class="k">uniform</span> <span class="k">mat4</span> <span class="n">projection</span><span class="p">;</span>
<span class="k">uniform</span> <span class="k">mat4</span> <span class="n">view</span><span class="p">;</span>
<span class="k">uniform</span> <span class="k">mat4</span> <span class="n">model</span><span class="p">;</span>
<span class="k">varying</span> <span class="k">vec4</span> <span class="n">v_col</span><span class="p">;</span>
<span class="k">varying</span> <span class="k">vec2</span> <span class="n">v_tex0</span><span class="p">;</span>
<span class="k">void</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="n">gl_Position</span> <span class="o">=</span> <span class="n">projection</span> <span class="o">*</span> <span class="n">view</span> <span class="o">*</span> <span class="n">model</span> <span class="o">*</span> <span class="n">position</span><span class="p">;</span>
   <span class="n">v_col</span> <span class="o">=</span> <span class="n">color</span><span class="p">;</span>
   <span class="n">v_tex0</span> <span class="o">=</span> <span class="n">texcoord0</span><span class="p">;</span>
   <span class="n">gl_PointSize</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">//fragment shader </span>
<span class="cp">#ifdef GL_ES</span>
<span class="k">precision</span> <span class="k">mediump</span> <span class="k">float</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="k">varying</span> <span class="k">vec4</span> <span class="n">v_col</span><span class="p">;</span>
<span class="k">varying</span> <span class="k">vec2</span> <span class="n">v_tex0</span><span class="p">;</span>
<span class="k">uniform</span> <span class="k">sampler2D</span> <span class="n">texture0</span><span class="p">;</span>
<span class="k">uniform</span> <span class="k">vec4</span> <span class="n">tint</span><span class="p">;</span>
<span class="k">void</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="n">gl_FragColor</span> <span class="o">=</span> <span class="n">v_col</span> <span class="o">*</span>  <span class="n">texture2D</span><span class="p">(</span><span class="n">texture0</span><span class="p">,</span>  <span class="n">v_tex0</span><span class="p">)</span> <span class="o">*</span> <span class="n">tint</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<h2 id="usage">Usage</h2>
<p><a href="https://nodei.co/npm/gl-basic-shader/"></a></p>
<h3 id="-shader-createshader-gl-options-"><code>shader = createShader(gl[, options])</code></h3>
<p>Creates a basic shader with the given options:</p>
<ul>
<li><code>texcoord</code> whether to generate <code>texcoord0</code> attribute vec2 and <code>texture0</code> sampler2D. If this is a number, then N texcoords and samplers will be used: <code>texture0</code>, <code>texture1</code>, etc.</li>
<li><code>normal</code> wherther to generate a <code>normal</code> attribute vec3</li>
<li><code>color</code> whether to generate a <code>color</code> attribute vec4</li>
<li><code>tint</code> the default value bound to the <code>tint</code> uniform vec4, if not specified then white is used</li>
<li><code>pointSize</code> the <code>gl_PointSize</code> for the vertex shader, defualt 1.0</li>
</ul>
<p>If the <code>texcoord</code>, <code>normal</code> or <code>color</code> options are false (or <code>texcoord</code> is 0) then that attribute will not be included in the shader.</p>
<p>The <code>projection</code>, <code>model</code>, and <code>view</code> matrices are set to an identity matrix initially. </p>
<h3 id="-createshader-generate-options-"><code>createShader.generate([options])</code></h3>
<p>This function is exposed to provide the generated shader source, useful for testing and other purposes where GL shader compilation may not be desirable. The options are the same as the constructor.</p>
<pre><code class="lang-js"><span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&apos;gl-basic-shader&apos;</span><span class="p">).</span><span class="nx">generate</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">source</span><span class="p">.</span><span class="nx">vertex</span><span class="p">,</span> <span class="nx">source</span><span class="p">.</span><span class="nx">fragment</span><span class="p">,</span> <span class="nx">source</span><span class="p">.</span><span class="nx">attributes</span><span class="p">,</span> <span class="nx">source</span><span class="p">.</span><span class="nx">uniforms</span><span class="p">)</span>
</code></pre>
<h2 id="attributes">attributes</h2>
<p>The attributes. Some may not be present if not specified at construction. They use a fixed location for easier VAO bindings.</p>
<ul>
<li><code>vec4 position</code> (location=0)</li>
<li><code>vec3 normal</code> (location=1)</li>
<li><code>vec4 color</code> (location=2)</li>
<li><code>vec2 texcoord0</code>, <code>texcoord1</code>, etc.. (location=3..N)</li>
</ul>
<h2 id="uniforms">uniforms</h2>
<p>The uniforms. </p>
<ul>
<li><code>mat4 model</code></li>
<li><code>mat4 view</code></li>
<li><code>mat4 projection</code></li>
<li><code>vec4 tint</code></li>
<li><code>sampler2D texture0</code>, <code>texture1</code>, etc</li>
</ul>
<h2 id="cli">cli</h2>
<p>You can also use the command line tool to print a generic shader.</p>
<p>Examples:</p>
<pre><code class="lang-sh"><span class="c"># print the vertex and fragment shader with the given options</span>
gl-basic-shader --color --normal --texcoord<span class="o">=</span>2

<span class="c"># print a new vertex shader to a file</span>
gl-basic-shader --vert &gt; vert.glsl

<span class="c"># pretty-print the JSON with extracted uniform/attribute info</span>
<span class="c"># could then be fed easily into gl-shader-core</span>
gl-basic-shader -jpe &gt; shader.json
</code></pre>
<p>Full options:</p>
<pre><code>Generate a basic shader.
Usage: gl-basic-shader [opts]

Options:
  --help, -h      show help message                   
  --color, -c     insert color vertex attribute       
  --texcoord, -t  insert texcoord vertex attribute(s) 
  --normal, -n    insert normal vertex attribute      
  --json, -j      json output                         
  --pretty, -p    pretty print json                   
  --extract, -e   extract attribs/uniforms (json only)
  --frag, -f      only show fragment shader           
  --vert, -v      only show vertex shader
</code></pre><h2 id="license">License</h2>
<p>MIT, see <a href="http://github.com/mattdesl/gl-basic-shader/blob/master/LICENSE.md">LICENSE.md</a> for details.</p>

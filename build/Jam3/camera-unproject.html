<h1 id="camera-unproject"><a target="_blank" href="http://github.com/Jam3/camera-unproject">camera-unproject</a></h1>
<p><a href="http://github.com/badges/stability-badges"></a></p>
<p>Unprojects a 2D screen space point into 3D space using the inverse of your camera&apos;s combined matrix.</p>
<pre><code class="lang-js"><span class="kd">var</span> <span class="nx">mat4</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&apos;gl-mat4&apos;</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">unproject</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&apos;camera-unproject&apos;</span><span class="p">)</span>

<span class="c1">//projection * view matrix</span>
<span class="kd">var</span> <span class="nx">combinedProjView</span> <span class="o">=</span> <span class="nx">mat4</span><span class="p">.</span><span class="nx">multiply</span><span class="p">([],</span> <span class="nx">projection</span><span class="p">,</span> <span class="nx">view</span><span class="p">)</span>

<span class="c1">//now invert it</span>
<span class="kd">var</span> <span class="nx">invProjView</span> <span class="o">=</span> <span class="nx">mat4</span><span class="p">.</span><span class="nx">invert</span><span class="p">([],</span> <span class="nx">combinedProjView</span><span class="p">)</span>

<span class="c1">//viewport bounds</span>
<span class="kd">var</span> <span class="nx">viewport</span> <span class="o">=</span> <span class="p">[</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">]</span>

<span class="c1">//2D point in screen space</span>
<span class="c1">//z=0 means &quot;near plane&quot;</span>
<span class="kd">var</span> <span class="nx">point</span> <span class="o">=</span> <span class="p">[</span><span class="mi">123</span><span class="p">,</span> <span class="mi">52</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

<span class="c1">//vec3 output</span>
<span class="kd">var</span> <span class="nx">output</span> <span class="o">=</span> <span class="p">[]</span>

<span class="nx">unproject</span><span class="p">(</span><span class="nx">output</span><span class="p">,</span> <span class="nx">point</span><span class="p">,</span> <span class="nx">viewport</span><span class="p">,</span> <span class="nx">invProjView</span><span class="p">)</span>
</code></pre>
<h2 id="usage">Usage</h2>
<p><a href="https://www.npmjs.com/package/camera-unproject"></a></p>
<h4 id="-vec3-unproject-out-point-viewport-invcombined-"><code>vec3 = unproject(out, point, viewport, invCombined)</code></h4>
<p>Unprojects the 2D <code>point</code> into 3D space using the <code>viewport</code> bounds (screen x, y, width, height) and <code>invCombined</code> matrix. </p>
<p>Where <code>point</code> [x, y, z] uses window coordinates for XY and a range between 0.0 (near plane) and 1.0 (far plane) for Z. <code>invCombined</code> is typically the invert of the combined <code>projection * view</code> matrix for your camera. </p>
<p>The <code>[x, y, z]</code> result is stored in <code>out</code> and returned.</p>
<h2 id="see-also">See Also</h2>
<ul>
<li><a href="https://www.npmjs.com/package/camera-project">camera-project</a></li>
</ul>
<h2 id="license">License</h2>
<p>MIT, see <a href="http://github.com/Jam3/camera-unproject/blob/master/LICENSE.md">LICENSE.md</a> for details.</p>

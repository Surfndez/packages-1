<h1 id="parse-dds"><a target="_blank" href="http://github.com/Jam3/parse-dds">parse-dds</a></h1>
<p><a href="http://github.com/badges/stability-badges"></a></p>
<p>Parses DDS texture headers in Node and the browser. </p>
<p>This was adapted from <a href="https://twitter.com/Tojiro">@toji</a>&apos;s wonderful <a href="https://github.com/toji/webgl-texture-utils/blob/master/texture-util/dds.js">webgl-texture-utils</a>. </p>
<p>Currently this only supports a limited range of common DDS formats: </p>
<ul>
<li>DXT1 (RGB)</li>
<li>DXT3 (RGBA)</li>
<li>DXT5 (RGBA)</li>
</ul>
<p>See <a href="test/index.js">test/index.js</a> for an example in Node, or <a href="demo/index.js">demo/index.js</a> for a WebGL compressed texture example.</p>
<p>Pull requests welcome.</p>
<h2 id="example">Example</h2>
<pre><code class="lang-js"><span class="kd">var</span> <span class="nx">parse</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&apos;parse-dds&apos;</span><span class="p">)</span>

<span class="kd">var</span> <span class="nx">buffer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Uint8Array</span><span class="p">(...</span> <span class="nx">DDS</span> <span class="nx">file</span> <span class="p">...)</span>
<span class="kd">var</span> <span class="nx">dds</span> <span class="o">=</span> <span class="nx">parse</span><span class="p">(</span><span class="nx">buffer</span><span class="p">)</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">dds</span><span class="p">.</span><span class="nx">format</span><span class="p">)</span>  <span class="c1">// &apos;dxt1&apos;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">dds</span><span class="p">.</span><span class="nx">shape</span><span class="p">)</span>   <span class="c1">// [ width, height ]</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">dds</span><span class="p">.</span><span class="nx">images</span><span class="p">)</span>  <span class="c1">// [ ... mipmap level data ... ]</span>

<span class="c1">// get the compressed texture data for gl.compressedTexImage2D</span>
<span class="kd">var</span> <span class="nx">image</span> <span class="o">=</span> <span class="nx">dds</span><span class="p">.</span><span class="nx">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="kd">var</span> <span class="nx">texture</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Uint8Array</span><span class="p">(</span><span class="nx">buffer</span><span class="p">,</span> <span class="nx">image</span><span class="p">.</span><span class="nx">offset</span><span class="p">,</span> <span class="nx">image</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span>
</code></pre>
<h2 id="install">Install</h2>
<pre><code class="lang-sh">npm install parse-dds --save-dev
</code></pre>
<h2 id="usage">Usage</h2>
<p><a href="https://www.npmjs.com/package/parse-dds"></a></p>
<h4 id="-dds-parse-arraybuffer-"><code>dds = parse(arrayBuffer)</code></h4>
<p>Parses an ArrayBuffer and returns the DDS headers for that file.</p>
<p>The returned values:</p>
<ul>
<li><code>shape</code> an array representing the <code>[ width, height ]</code> of the texture</li>
<li><code>flags</code> the DDS bit flags stored in the file</li>
<li><code>format</code> a string, either <code>&apos;dxt1&apos;</code>, <code>&apos;dxt3&apos;</code> or <code>&apos;dxt5&apos;</code></li>
<li><code>images</code> a list of information to extract sub-arrays for each mipmap level</li>
</ul>
<p>Each image has the form:</p>
<pre><code class="lang-js"><span class="p">{</span>
  <span class="nx">shape</span><span class="o">:</span> <span class="p">[</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span> <span class="p">],</span> <span class="c1">// size of this mipmap level</span>
  <span class="nx">offset</span><span class="o">:</span> <span class="nx">x</span><span class="p">,</span>                <span class="c1">// byte offset into the input buffer</span>
  <span class="nx">length</span><span class="o">:</span> <span class="nx">len</span><span class="p">,</span>              <span class="c1">// length of this mipmap level image data</span>
<span class="p">}</span>
</code></pre>
<h2 id="license">License</h2>
<p>MIT, see <a href="http://github.com/Jam3/parse-dds/blob/master/LICENSE.md">LICENSE.md</a> for details.</p>

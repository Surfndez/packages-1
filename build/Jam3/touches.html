<h1 id="touches"><a target="_blank" href="http://github.com/Jam3/touches">touches</a></h1>
<p><a href="http://github.com/badges/stability-badges"></a></p>
<p><a href="http://jam3.github.io/touches/">(click for demo)</a> - <a href="demo.js">(source)</a></p>
<p>Normalizes touch and mouse events to provide a simpler interface. Simplest case:</p>
<pre><code class="lang-js"><span class="c1">//get mouse/touch events on window</span>
<span class="nx">require</span><span class="p">(</span><span class="s1">&apos;touches&apos;</span><span class="p">)()</span>
  <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&apos;start&apos;</span><span class="p">,</span> <span class="nx">mouseDown</span><span class="p">)</span>   <span class="c1">//-&gt; mousedown / touchstart</span>
  <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&apos;move&apos;</span><span class="p">,</span> <span class="nx">mouseMove</span><span class="p">)</span>    <span class="c1">//-&gt; mousemove / touchmove</span>
  <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&apos;end&apos;</span><span class="p">,</span> <span class="nx">mouseEnd</span><span class="p">)</span>      <span class="c1">//-&gt; mouseup   / touchend</span>

<span class="kd">function</span> <span class="nx">mouseDown</span><span class="p">(</span><span class="nx">ev</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">//recommended to avoid duplicate</span>
  <span class="c1">//events when mobile devices support both mouse + touch</span>
  <span class="nx">ev</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>
<span class="p">}</span>

<span class="p">...</span>
</code></pre>
<p>A common pattern for drag events is to listen for events on a parent element (like the <code>window</code>), and use a different element as the <code>target</code> for client offset calculation. The second argument to the event listener is a <code>[x, y]</code> vector representing the calculated client offset (relative to top left of target element).</p>
<pre><code class="lang-js"><span class="kd">var</span> <span class="nx">touch</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&apos;touches&apos;</span><span class="p">)</span>
<span class="nx">touch</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span> <span class="p">{</span> <span class="nx">target</span><span class="o">:</span> <span class="nx">button</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&apos;move&apos;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">ev</span><span class="p">,</span> <span class="nx">position</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&apos;relative pos&apos;</span><span class="p">,</span> <span class="nx">position</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">position</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
  <span class="p">})</span>
</code></pre>
<p>Another common pattern, especially with drag events, is filtering touch input to a single finger. Below; the events will only get fired for the first finger placed on the screen. Subsequent fingers will be ignored until after the first finger has been lifted. </p>
<pre><code class="lang-js"><span class="nx">touch</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span> <span class="p">{</span> <span class="nx">target</span><span class="o">:</span> <span class="nx">button</span><span class="p">,</span> <span class="nx">filtered</span><span class="o">:</span> <span class="kc">true</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&apos;start&apos;</span><span class="p">,</span> <span class="nx">dragStart</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&apos;move&apos;</span><span class="p">,</span> <span class="nx">dragMove</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&apos;end&apos;</span><span class="p">,</span> <span class="nx">dragEnd</span><span class="p">)</span>
</code></pre>
<iframe scrolling="no" seamless="seamless" src="http://jam3.github.io/touches/"></iframe><h2 id="usage">Usage</h2>
<p><a href="https://www.npmjs.com/package/touches"></a></p>
<h4 id="-emitter-require-touches-element-opt-"><code>emitter = require(&apos;touches&apos;)([element, opt])</code></h4>
<p>Creates a new drag emitter by attaching listeners to <code>element</code>, which defaults to <code>window</code>. </p>
<p>The <code>opt</code> options can be:</p>
<ul>
<li><code>target</code> the element to use when calculating the <code>position</code> parameter passed to event listeners. The clientX/clientY of the event will be relative to this target</li>
<li><code>filtered</code> whether the touch events should be filtered to the first placed finger</li>
<li><code>type</code> can be a string, either <code>&quot;mouse&quot;</code> or <code>&quot;touch&quot;</code> if listening to only one or the other event is desired. If any other value, will listen for both mouse and touch.</li>
</ul>
<p>If the events are not filtered, the <code>position</code> for an event will be the first changed touch associated with the <code>target</code>. </p>
<h4 id="-emitter-disable-"><code>emitter.disable()</code></h4>
<p>Disables the events associated with this emitter by removing them from the DOM element. Returns the emitter for chaining.</p>
<h4 id="-emitter-enable-"><code>emitter.enable()</code></h4>
<p>Enables the events associated with this emitter by adding them to the DOM element. The emitter is enabled by default. Returns the emitter for chaining.</p>
<h4 id="-emitter-target-"><code>emitter.target</code></h4>
<p>The current target for position offset calculation.</p>
<h4 id="-emitter-on-start-listener-"><code>emitter.on(&apos;start&apos;, listener)</code></h4>
<h4 id="-emitter-on-move-listener-"><code>emitter.on(&apos;move&apos;, listener)</code></h4>
<h4 id="-emitter-on-end-listener-"><code>emitter.on(&apos;end&apos;, listener)</code></h4>
<p>The mousedown/touchstart, mousemove/touchmove, and mouseup/touchend events, respectively. Listeners are called with two parameters: <code>(ev, position)</code> where <code>ev</code> is the event and <code>position</code> is an <code>[x, y]</code> array of the client offset, relative to the target&apos;s top left.</p>
<h2 id="demo">demo</h2>
<p>To run the demo from source, first <code>git clone</code> this repo, then:</p>
<pre><code class="lang-sh"><span class="nb">cd </span>touches
npm install
npm start
</code></pre>
<p>And open <code>localhost:9966</code> in your browser.</p>
<p>To generate a distribution bundle: </p>
<pre><code class="lang-sh">npm run build
</code></pre>
<h2 id="license">License</h2>
<p>MIT, see <a href="http://github.com/Jam3/touches/blob/master/LICENSE.md">LICENSE.md</a> for details.</p>

{"readme":"<h1 class=\"title\"><a target=\"_blank\" href=\"https://github.com/hughsk/gl-geometry\">gl-geometry </a><div class=\"contrib\"></div></h1>\n<p>A flexible wrapper for <a href=\"http://github.com/stackgl/gl-vao\">gl-vao</a>\nand <a href=\"http://github.com/stackgl/gl-buffer\">gl-buffer</a> that you can use to\nset up renderable WebGL geometries from a variety of different formats.</p>\n<h2 id=\"usage\">Usage</h2>\n<p><a href=\"https://nodei.co/npm/gl-geometry/\"></a></p>\n<h3 id=\"geom-creategeometry-gl-\">geom = createGeometry(gl)</h3>\n<p>Creates a new geometry attached to the WebGL canvas context <code>gl</code>.</p>\n<h3 id=\"geom-attr-name-values-opt-\">geom.attr(name, values[, opt])</h3>\n<p>Define a new attribute value, for example using a simplicial complex:</p>\n<pre><code class=\"lang-javascript\"><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;createGeometry&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>gl-geometry</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;bunny&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>bunny</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;geom&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;createGeometry</span><span class=\"meta brace round js\"><span>(</span></span><span>gl</span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>attr</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>positions</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;bunny</span><span class=\"meta brace round js\"><span>)</span></span></span></div>\n</code></pre>\n<p>The following vertex formats are supported and will be normalized:</p>\n<ul>\n<li><p>Arrays of arrays, e.g. <code>[[0, 0, 0], [1, 0, 0], [1, 1, 0]]</code>.</p>\n</li>\n<li><p>Flat arrays, e.g. <code>[0, 0, 0, 1, 0, 0, 1, 1, 0]</code>.</p>\n</li>\n<li><p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays\">Typed arrays</a>,\npreferably a <code>Float32Array</code>.</p>\n</li>\n<li><p>1-dimensional <a href=\"https://github.com/scijs/ndarray\">ndarrays</a>.</p>\n</li>\n<li><p><a href=\"https://github.com/mikolalysenko/simplicial-complex\">simplicial complexes</a>,\n  i.e. an object with a <code>positions</code> array and a <code>cells</code> array. The former is\n  a list of unique vertices in the mesh (if you&apos;ve used three.js, think\n  <code>THREE.Vector3</code>), and the latter is an index mapping these vertices to faces\n  (<code>THREE.Face3</code>) in the mesh. It looks something like this:</p>\n<pre><code class=\"lang-json\"><div class=\"line\"><span class=\"source json\"><span class=\"meta structure dictionary json\"><span class=\"punctuation definition dictionary begin json\"><span>{</span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure dictionary json\"><span>&#xA0;&#xA0;</span><span class=\"string quoted double json\"><span class=\"punctuation definition string begin json\"><span>&quot;</span></span><span>positions</span><span class=\"punctuation definition string end json\"><span>&quot;</span></span></span><span class=\"meta structure dictionary value json\"><span class=\"punctuation separator dictionary key-value json\"><span>:</span></span><span>&#xA0;</span><span class=\"meta structure array json\"><span class=\"punctuation definition array begin json\"><span>[</span></span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure dictionary json\"><span class=\"meta structure dictionary value json\"><span class=\"meta structure array json\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"meta structure array json\"><span class=\"punctuation definition array begin json\"><span>[</span></span><span class=\"constant numeric json\"><span>0.0</span></span><span class=\"punctuation separator array json\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric json\"><span>0.0</span></span><span class=\"punctuation separator array json\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric json\"><span>0.0</span></span><span class=\"punctuation definition array end json\"><span>]</span></span></span><span class=\"punctuation separator array json\"><span>,</span></span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure dictionary json\"><span class=\"meta structure dictionary value json\"><span class=\"meta structure array json\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"meta structure array json\"><span class=\"punctuation definition array begin json\"><span>[</span></span><span class=\"constant numeric json\"><span>1.5</span></span><span class=\"punctuation separator array json\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric json\"><span>0.0</span></span><span class=\"punctuation separator array json\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric json\"><span>0.0</span></span><span class=\"punctuation definition array end json\"><span>]</span></span></span><span class=\"punctuation separator array json\"><span>,</span></span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure dictionary json\"><span class=\"meta structure dictionary value json\"><span class=\"meta structure array json\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"meta structure array json\"><span class=\"punctuation definition array begin json\"><span>[</span></span><span class=\"constant numeric json\"><span>1.5</span></span><span class=\"punctuation separator array json\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric json\"><span>1.5</span></span><span class=\"punctuation separator array json\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric json\"><span>0.0</span></span><span class=\"punctuation definition array end json\"><span>]</span></span></span><span class=\"punctuation separator array json\"><span>,</span></span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure dictionary json\"><span class=\"meta structure dictionary value json\"><span class=\"meta structure array json\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"meta structure array json\"><span class=\"punctuation definition array begin json\"><span>[</span></span><span class=\"constant numeric json\"><span>0.0</span></span><span class=\"punctuation separator array json\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric json\"><span>1.5</span></span><span class=\"punctuation separator array json\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric json\"><span>0.0</span></span><span class=\"punctuation definition array end json\"><span>]</span></span></span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure dictionary json\"><span class=\"meta structure dictionary value json\"><span class=\"meta structure array json\"><span>&#xA0;&#xA0;</span><span class=\"punctuation definition array end json\"><span>]</span></span></span><span class=\"punctuation separator dictionary pair json\"><span>,</span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure dictionary json\"><span>&#xA0;&#xA0;</span><span class=\"string quoted double json\"><span class=\"punctuation definition string begin json\"><span>&quot;</span></span><span>cells</span><span class=\"punctuation definition string end json\"><span>&quot;</span></span></span><span class=\"meta structure dictionary value json\"><span class=\"punctuation separator dictionary key-value json\"><span>:</span></span><span>&#xA0;</span><span class=\"meta structure array json\"><span class=\"punctuation definition array begin json\"><span>[</span></span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure dictionary json\"><span class=\"meta structure dictionary value json\"><span class=\"meta structure array json\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"meta structure array json\"><span class=\"punctuation definition array begin json\"><span>[</span></span><span class=\"constant numeric json\"><span>0</span></span><span class=\"punctuation separator array json\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric json\"><span>1</span></span><span class=\"punctuation separator array json\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric json\"><span>2</span></span><span class=\"punctuation definition array end json\"><span>]</span></span></span><span class=\"punctuation separator array json\"><span>,</span></span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure dictionary json\"><span class=\"meta structure dictionary value json\"><span class=\"meta structure array json\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"meta structure array json\"><span class=\"punctuation definition array begin json\"><span>[</span></span><span class=\"constant numeric json\"><span>1</span></span><span class=\"punctuation separator array json\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric json\"><span>2</span></span><span class=\"punctuation separator array json\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric json\"><span>3</span></span><span class=\"punctuation definition array end json\"><span>]</span></span></span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure dictionary json\"><span class=\"meta structure dictionary value json\"><span class=\"meta structure array json\"><span>&#xA0;&#xA0;</span><span class=\"punctuation definition array end json\"><span>]</span></span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure dictionary json\"><span class=\"punctuation definition dictionary end json\"><span>}</span></span></span></span></div>\n</code></pre>\n<p>You can specify <code>opt.size</code> for the vertex size, defaults to 3.</p>\n</li>\n</ul>\n<h3 id=\"geom-faces-values-opt-\">geom.faces(values[, opt])</h3>\n<p>Pass a simplicial complex&apos;s <code>cells</code> property here in any of the above formats\nto use it as your index when drawing the geometry. This can only be called after all of the <code>.attr</code> calls. For example:</p>\n<pre><code class=\"lang-javascript\"><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;createGeometry&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>gl-geometry</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;bunny&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>bunny</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>bunny</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>normals&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;normals</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>vertexNormals</span><span class=\"meta brace round js\"><span>(</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;bunny</span><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support constant dom js\"><span>cells</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;bunny</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>positions</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;geom&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;createGeometry</span><span class=\"meta brace round js\"><span>(</span></span><span>gl</span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>attr</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>positions</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;bunny</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>positions</span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>attr</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>normals</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;bunny</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>normals</span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>faces</span><span class=\"meta brace round js\"><span>(</span></span><span>bunny</span><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support constant dom js\"><span>cells</span></span><span class=\"meta brace round js\"><span>)</span></span></span></div>\n</code></pre>\n<p>You can specify <code>opt.size</code> for the cell size, defaults to 3.</p>\n<h3 id=\"geom-bind-shader-\">geom.bind([shader])</h3>\n<p>Binds the underlying <a href=\"https://github.com/stackgl/gl-vao\">VAO</a> &#x2013; this must\nbe called before calling <code>geom.draw</code>. Optionally, you can pass in a\n<a href=\"http://github.com/stackgl/gl-shader\">gl-shader</a> to\nautomatically set up your attribute locations for you.</p>\n<h3 id=\"geom-draw-mode-start-stop-\">geom.draw(mode, start, stop)</h3>\n<p>Draws the geometry to the screen using the currently bound shader.</p>\n<p>Optionally, you can pass in the drawing mode, which should be one of the\nfollowing:</p>\n<ul>\n<li><code>gl.POINTS</code></li>\n<li><code>gl.LINES</code></li>\n<li><code>gl.LINE_STRIP</code></li>\n<li><code>gl.LINE_LOOP</code></li>\n<li><code>gl.TRIANGLES</code></li>\n<li><code>gl.TRIANGLE_STRIP</code></li>\n<li><code>gl.TRIANGLE_FAN</code></li>\n</ul>\n<p>The default value is <code>gl.TRIANGLES</code>. You&apos;re also able to pass in a <code>start</code> and\n<code>stop</code> range for the points you want to render, just the same as you would\nwith <code>gl.drawArrays</code> or <code>gl.drawElements</code>.</p>\n<h3 id=\"geom-unbind-\">geom.unbind()</h3>\n<p>Unbinds the underlying VAO. This <em>must</em> be done when you&apos;re finished drawing,\nunless you&apos;re binding to another gl-geometry or gl-vao instance.</p>\n<h3 id=\"geom-dispose-\">geom.dispose()</h3>\n<p>Disposes the underlying element and array buffers, as well as the VAO.</p>\n<h2 id=\"see-also\">See Also</h2>\n<ul>\n<li><a href=\"https://www.khronos.org/registry/webgl/specs/1.0/#5.13\">ArrayBuffer and Typed Arrays</a></li>\n<li><a href=\"https://www.khronos.org/registry/webgl/specs/1.0/#5.14\">The WebGL Context</a></li>\n<li><a href=\"http://github.com/mikolalysenko/simplicial-complex\">simplicial-complex</a></li>\n<li><a href=\"https://github.com/scijs/ndarray\">ndarray</a></li>\n<li><a href=\"https://github.com/stackgl/gl-shader\">gl-shader</a></li>\n<li><a href=\"https://github.com/stackgl/gl-buffer\">gl-buffer</a></li>\n<li><a href=\"https://github.com/stackgl/gl-vao\">gl-vao</a></li>\n</ul>\n<h2 id=\"license\">License</h2>\n<p>MIT. See <a href=\"http://github.com/hughsk/is-typedarray/blob/master/LICENSE.md\">LICENSE.md</a> for details.</p>\n"}
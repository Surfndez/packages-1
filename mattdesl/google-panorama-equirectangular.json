{"readme":"<h1 class=\"title\"><a target=\"_blank\" href=\"https://github.com/mattdesl/google-panorama-equirectangular\">google-panorama-equirectangular</a><div class=\"contrib\"></div></h1>\n<p><a href=\"http://github.com/badges/stability-badges\"></a></p>\n<p><a href=\"http://mattdesl.github.io/google-panorama-equirectangular/demo/\"><img src=\"http://i.imgur.com/AukW6Mv.png\" alt=\"2d\"></a></p>\n<p><a href=\"http://mattdesl.github.io/google-panorama-equirectangular/demo/\">webgl demo</a> - <a href=\"http://github.com/mattdesl/google-panorama-equirectangular/blob/master/./demo/gpu.js\">source</a></p>\n<p>Stitches Google Street View and Photo Sphere tiles into an equirectangular image. For use in the browser, with Webpack or Browserify.</p>\n<p>Also includes an <a href=\"#intermediate-mode\">intermediate mode</a> for higher quality WebGL rendering on low-end devices.</p>\n<h2 id=\"install\">Install</h2>\n<pre><code class=\"lang-sh\"><div class=\"line\"><span class=\"source shell\"><span>npm&#xA0;install&#xA0;google-panorama-equirectangular</span></span></div>\n</code></pre>\n<h2 id=\"example\">Example</h2>\n<p>For full examples, see the <a href=\"http://github.com/mattdesl/google-panorama-equirectangular/blob/master/demo/\">demo/</a> folder, or <a href=\"#running-from-source\">running from source</a> for details.</p>\n<p>Make sure to include the Google Client library first:</p>\n<pre><code class=\"lang-html\"><div class=\"line\"><span class=\"text plain null-grammar\"><span>&#xA0;&#xA0;&lt;script&#xA0;src=&quot;</span><span class=\"markup underline link https hyperlink\"><span>https://maps.googleapis.com/maps/api/js?v=3.21</span></span><span>&quot;&gt;&lt;/script&gt;</span></span></div>\n</code></pre>\n<p>Then, in JavaScript:</p>\n<pre><code class=\"lang-js\"><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;load&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>google-panorama-equirectangular</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;panoID&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>dXZfBMex9_L7jO2JW3FTdA</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"support function js\"><span>load</span></span><span class=\"meta brace round js\"><span>(</span></span><span>panoID</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span><span>&#xA0;zoom</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>2</span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>}</span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>on</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>start</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span>&#xA0;</span><span class=\"punctuation definition parameters begin js\"><span>(</span></span><span class=\"variable parameter function js\"><span>data</span></span><span class=\"punctuation definition parameters end js\"><span>)</span></span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"entity name type object js console\"><span>console</span></span><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js console\"><span>log</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>canvas&#xA0;size:&#xA0;</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"variable other object js\"><span>data</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"support constant dom js\"><span>width</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"variable other object js\"><span>data</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"support constant dom js\"><span>height</span></span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta brace curly js\"><span>}</span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>on</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>progress</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span>&#xA0;</span><span class=\"punctuation definition parameters begin js\"><span>(</span></span><span class=\"variable parameter function js\"><span>ev</span></span><span class=\"punctuation definition parameters end js\"><span>)</span></span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"entity name type object js console\"><span>console</span></span><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js console\"><span>log</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>progress:&#xA0;</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"variable other object js\"><span>ev</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>count</span></span><span>&#xA0;</span><span class=\"keyword operator js\"><span>/</span></span><span>&#xA0;</span><span class=\"variable other object js\"><span>ev</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>total</span></span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta brace curly js\"><span>}</span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>on</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>complete</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span>&#xA0;</span><span class=\"punctuation definition parameters begin js\"><span>(</span></span><span class=\"variable parameter function js\"><span>image</span></span><span class=\"punctuation definition parameters end js\"><span>)</span></span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"variable other object js\"><span>document</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"support constant dom js\"><span>body</span></span><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function dom js\"><span>appendChild</span></span><span class=\"meta brace round js\"><span>(</span></span><span>image</span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"entity name type object js console\"><span>console</span></span><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js console\"><span>log</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>canvas&#xA0;image:&#xA0;</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;image</span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta brace curly js\"><span>}</span></span><span class=\"meta brace round js\"><span>)</span></span></span></div>\n</code></pre>\n<h2 id=\"usage\">Usage</h2>\n<p><a href=\"https://www.npmjs.com/package/google-panorama-equirectangular\"></a></p>\n<h4 id=\"-emitter-load-id-opt-\"><code>emitter = load(id, [opt])</code></h4>\n<p>Creates a new StreetView stitcher with <code>id</code> and optional settings. <code>opt</code> can be:</p>\n<ul>\n<li><code>zoom</code> an integer between 0 and 5 (inclusive), defaults to 1</li>\n<li><code>canvas</code> a HTMLCanvasElement to re-use, defaults to creating a new element</li>\n<li><code>tiles</code> is the tile dimensions from <code>getPanoramaByLocation</code> or <code>getPanoramaById</code>, defaults to assuming StreetView image dimensions</li>\n<li><code>crossOrigin</code> crossOrigin String for image loading, defaults to <code>undefined</code></li>\n</ul>\n<p>Here is an example using <a href=\"https://github.com/Jam3/google-panorama-by-id\">google-panorama-by-id</a>.</p>\n<p>It&apos;s recommended you specify <code>tiles</code> for an accurate result across different image types (panorama, photo sphere, etc).</p>\n<pre><code class=\"lang-js\"><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;load&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>google-panorama-equirectangular</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;panoData&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>google-panorama-by-id</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;id&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>dXZfBMex9_L7jO2JW3FTdA</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"entity name function js\"><span>panoData</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span>id</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span>&#xA0;</span><span class=\"punctuation definition parameters begin js\"><span>(</span></span><span class=\"variable parameter function js\"><span>err</span></span><span class=\"meta object delimiter js\"><span>,</span></span><span>&#xA0;</span><span class=\"variable parameter function js\"><span>result</span></span><span class=\"punctuation definition parameters end js\"><span>)</span></span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span>&#xA0;&#xA0;</span><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;tiles&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"variable other object js\"><span>result</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>tiles</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span>&#xA0;&#xA0;</span><span class=\"support function js\"><span>load</span></span><span class=\"meta brace round js\"><span>(</span></span><span>id</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span><span>&#xA0;tiles</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;tiles</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;zoom</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>2</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;canvas</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;myCanvas&#xA0;</span><span class=\"meta brace curly js\"><span>}</span></span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta brace curly js\"><span>}</span></span><span class=\"meta brace round js\"><span>)</span></span></span></div>\n</code></pre>\n<h3 id=\"events\">events</h3>\n<h4 id=\"-emitter-on-start-fn-\"><code>emitter.on(&apos;start&apos;, fn)</code></h4>\n<p>Called when the stitching process begins, with <code>data</code> parameter that includes the output of <a href=\"https://github.com/Jam3/google-panorama-tiles\">google-panorama-tiles</a>:</p>\n<pre><code class=\"lang-js\"><div class=\"line\"><span class=\"source js\"><span class=\"meta brace curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;columns</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"support class js\"><span>Number</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>&#xA0;x&#xA0;tile&#xA0;count</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;rows</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"support class js\"><span>Number</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>&#xA0;y&#xA0;tile&#xA0;count</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;tileWidth</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"support class js\"><span>Number</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;&#xA0;</span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>&#xA0;tile&#xA0;size</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;tileHeight</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"support class js\"><span>Number</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>&#xA0;tile&#xA0;size</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;width</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"support class js\"><span>Number</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>&#xA0;canvas&#xA0;size</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;height</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"support class js\"><span>Number</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>&#xA0;canvas&#xA0;size</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta brace curly js\"><span>}</span></span></span></div>\n</code></pre>\n<h4 id=\"-emitter-on-progress-fn-\"><code>emitter.on(&apos;progress&apos;, fn)</code></h4>\n<p>Called after a new tile has been loaded and drawn to the canvas.</p>\n<pre><code class=\"lang-js\"><div class=\"line\"><span class=\"source js\"><span class=\"meta brace curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;count</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"support class js\"><span>Number</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>&#xA0;current&#xA0;#&#xA0;of&#xA0;tiles&#xA0;loaded</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;total</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"support class js\"><span>Number</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>&#xA0;total&#xA0;number&#xA0;of&#xA0;tiles</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;image</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"support class js\"><span>Image</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>&#xA0;an&#xA0;image&#xA0;for&#xA0;this&#xA0;tile,&#xA0;might&#xA0;be&#xA0;null</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;position</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"meta brace square js\"><span>[</span></span><span>x</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;y</span><span class=\"meta brace square js\"><span>]</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>&#xA0;the&#xA0;pixel&#xA0;position&#xA0;of&#xA0;the&#xA0;tile&#xA0;in&#xA0;the&#xA0;full&#xA0;image</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta brace curly js\"><span>}</span></span></span></div>\n</code></pre>\n<p>In <a href=\"#intermediate-mode\">intermediate mode</a>, the <code>image</code> might be an Image or a Canvas, depending on crop.</p>\n<h4 id=\"-emitter-on-not-found-fn-\"><code>emitter.on(&apos;not-found&apos;, fn)</code></h4>\n<p>Called when an image is skipped due to it not being found. The <code>url</code> is passed.</p>\n<h4 id=\"-emitter-on-complete-fn-\"><code>emitter.on(&apos;complete&apos;, fn)</code></h4>\n<p>Called when the stitching is complete. The resulting <code>canvas</code> is passed as the parameter.</p>\n<p>In <a href=\"#intermediate-mode\">intermediate mode</a>, the passed <code>canvas</code> is the one used during cropping.</p>\n<h2 id=\"intermediate-mode\">Intermediate Mode</h2>\n<p>The default export stitches all tiles into a single Canvas element. This is convenient, but not ideal for low-end devices like iOS Safari. In some browsers, there is a maximum size for canvas elements, and no way to query this value. </p>\n<p>For example, in a 256MB RAM iPhone, the full canvas size must be less than <code>1024 * 1024 * 3</code> (3 MP).</p>\n<p>WebGL applications can leverage &quot;intermediate rendering&quot; mode which keeps no more than a single 512x512 canvas in memory at a time. This allows higher quality panoramas to be stitched on low-end devices. The interface is the same, and can be required like this:</p>\n<pre><code class=\"lang-js\"><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;equirect&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>google-panorama-equirectangular/intermediate</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div>\n</code></pre>\n<p>Each <code>&apos;progress&apos;</code> event simply returned a cropped image for that tile. You will need to stitch and upload sub-images yourself to WebGL. See <a href=\"http://github.com/mattdesl/google-panorama-equirectangular/blob/master/demo/gpu.js\">demo/gpu.js</a> for an example.</p>\n<p>In intermediate mode, the <code>imgage</code> field of <code>&apos;progress&apos;</code> events might be a canvas or image, depending on whether a crop was necessary. The <code>originalImage</code> is provided to allow access to the HTMLImageElement, so the event data is:</p>\n<pre><code class=\"lang-js\"><div class=\"line\"><span class=\"source js\"><span class=\"meta brace curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;count</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"support class js\"><span>Number</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;total</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"support class js\"><span>Number</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;image</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;Canvas</span><span class=\"keyword operator bitwise js\"><span>|</span></span><span class=\"support class js\"><span>Image</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;position</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"meta brace square js\"><span>[</span></span><span>x</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;y</span><span class=\"meta brace square js\"><span>]</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;originalImage</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"support class js\"><span>Image</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta brace curly js\"><span>}</span></span></span></div>\n</code></pre>\n<h2 id=\"running-from-source\">Running From Source</h2>\n<p>To run the demos from source:</p>\n<pre><code class=\"lang-sh\"><div class=\"line\"><span class=\"source shell\"><span>git&#xA0;clone&#xA0;https://github.com/mattdesl/google-panorama-equirectangular.git</span></span></div><div class=\"line\"><span class=\"source shell\"><span class=\"support function builtin shell\"><span>cd</span></span><span>&#xA0;google-panorama-equirectangular</span></span></div><div class=\"line\"><span class=\"source shell\"><span>npm&#xA0;install</span></span></div>\n</code></pre>\n<p>Now run one of the demos:</p>\n<pre><code class=\"lang-sh\"><div class=\"line\"><span class=\"source shell\"><span class=\"comment line number-sign shell\"><span class=\"punctuation definition comment shell\"><span>#</span></span><span>&#xA0;the&#xA0;simple&#xA0;WebGL&#xA0;demo</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source shell\"><span>npm&#xA0;run&#xA0;webgl</span></span></div><div class=\"line\"><span class=\"source shell\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source shell\"><span class=\"comment line number-sign shell\"><span class=\"punctuation definition comment shell\"><span>#</span></span><span>&#xA0;the&#xA0;simple&#xA0;2D&#xA0;DOM&#xA0;demo</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source shell\"><span>npm&#xA0;run&#xA0;2d</span></span></div><div class=\"line\"><span class=\"source shell\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source shell\"><span class=\"comment line number-sign shell\"><span class=\"punctuation definition comment shell\"><span>#</span></span><span>&#xA0;the&#xA0;GPU&#xA0;stitching&#xA0;demo</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source shell\"><span>npm&#xA0;run&#xA0;gpu</span></span></div>\n</code></pre>\n<p>And open <a href=\"http://localhost:9966/\">http://localhost:9966/</a>. Changing the source will re-load the browser page.</p>\n<h2 id=\"also-see\">Also See</h2>\n<ul>\n<li><a href=\"https://github.com/Jam3/google-panorama-zoom-level\">google-panorama-zoom-level</a></li>\n<li><a href=\"https://github.com/Jam3/google-panorama-by-id\">google-panorama-by-id</a></li>\n<li><a href=\"https://github.com/Jam3/google-panorama-by-location\">google-panorama-by-location</a></li>\n<li><a href=\"https://github.com/Jam3/google-panorama-tiles\">google-panorama-tiles</a></li>\n<li><a href=\"https://github.com/Jam3/awesome-streetview\">awesome-streetview</a></li>\n</ul>\n<h2 id=\"credits\">Credits</h2>\n<p>Thanks to @thespite&apos;s prior work on <a href=\"https://github.com/spite/PanomNom.js/\">PanomNom.js</a>, which was used as a reference while building these modules.</p>\n<h2 id=\"license\">License</h2>\n<p>MIT, see <a href=\"http://github.com/mattdesl/google-panorama-equirectangular/blob/master/LICENSE.md\">LICENSE.md</a> for details.</p>\n"}
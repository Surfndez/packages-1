{"readme":"<h1 class=\"title\"><a target=\"_blank\" href=\"https://github.com/mattdesl/three-glslify\">three-glslify</a><div class=\"contrib\"></div></h1>\n<p><a href=\"http://github.com/badges/stability-badges\"></a></p>\n<p>A helper to turn <a href=\"https://github.com/stackgl/glslify\">glslify</a> shader into a ThreeJS shader object. </p>\n<p>Typical example:</p>\n<pre><code class=\"lang-js\"><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;</span><span class=\"constant other js\"><span>THREE</span></span><span>&#xA0;</span><span class=\"keyword operator js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>three</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>inline&#xA0;our&#xA0;shader&#xA0;code</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;glslify&#xA0;</span><span class=\"keyword operator js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>glslify</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;source&#xA0;</span><span class=\"keyword operator js\"><span>=</span></span><span>&#xA0;glslify</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"meta brace curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;vertex</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>./foo.vert</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;fragment</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>./foo.frag</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;sourceOnly</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"constant language boolean true js\"><span>true</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta brace curly js\"><span>}</span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>create&#xA0;a&#xA0;shader&#xA0;that&#xA0;ThreeJS&#xA0;will&#xA0;recognize</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;createShader&#xA0;</span><span class=\"keyword operator js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>three-glslify</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span><span>(</span></span><span class=\"constant other js\"><span>THREE</span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;myShader&#xA0;</span><span class=\"keyword operator js\"><span>=</span></span><span>&#xA0;createShader</span><span class=\"meta brace round js\"><span>(</span></span><span>source</span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>we&#xA0;can&#xA0;now&#xA0;use&#xA0;it&#xA0;in&#xA0;ShaderMaterial&#xA0;or&#xA0;EffectComposer</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;pass&#xA0;</span><span class=\"keyword operator js\"><span>=</span></span><span>&#xA0;</span><span class=\"meta class instance constructor\"><span class=\"keyword operator new js\"><span>new</span></span><span>&#xA0;</span><span class=\"entity name type instance js\"><span>THREE.ShaderPass</span></span></span><span class=\"meta brace round js\"><span>(</span></span><span>&#xA0;myShader&#xA0;</span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>effectComposer</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>addPass</span><span class=\"meta brace round js\"><span>(</span></span><span>pass</span><span class=\"meta brace round js\"><span>)</span></span></span></div>\n</code></pre>\n<p>The returned <code>myShader</code> object looks like this, with new instances of Texture, Vector2, etc. based on the uniform type. Attributes start with empty arrays. </p>\n<pre><code class=\"lang-js\"><div class=\"line\"><span class=\"source js\"><span class=\"meta brace curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;vertexShader</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>...&#xA0;source&#xA0;...</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;fragmentShader</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>...&#xA0;source&#xA0;...</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;uniforms</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;u_tex0</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span><span>&#xA0;type</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>t</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;value</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"meta class instance constructor\"><span class=\"keyword operator new js\"><span>new</span></span><span>&#xA0;</span><span class=\"entity name type instance js\"><span>THREE.Texture</span></span></span><span class=\"meta brace round js\"><span>(</span><span>)</span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>}</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"meta delimiter method period js\"><span>.</span><span>.</span><span>.</span></span><span>&#xA0;etc</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"meta brace curly js\"><span>}</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;attributes</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;displacement</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span><span>&#xA0;type</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>f</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;value</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"meta brace square js\"><span>[</span><span>]</span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>}</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"meta brace curly js\"><span>}</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta brace curly js\"><span>}</span></span></span></div>\n</code></pre>\n<h2 id=\"usage\">Usage</h2>\n<p><a href=\"https://nodei.co/npm/three-glslify/\"></a></p>\n<h3 id=\"-createshader-source-options-\"><code>createShader(source, options)</code></h3>\n<p>Creates a shader with the given source (from glslify, using <code>sourceOnly</code>) and options.</p>\n<p>Options:</p>\n<ul>\n<li><code>colors</code> an array of uniform names that should be mapped to THREE.Color typed, <code>&apos;c&apos;</code>. Otherwise these will just be plain THREE.Vector3 types, <code>v3</code></li>\n</ul>\n<h2 id=\"gotchas\">Gotchas</h2>\n<p>Since ThreeJS release cycles are unpredictable and don&apos;t use semantic versioning, this module may break with newer versions of ThreeJS. It currently works with three 0.68.0 (r68). Send issues or PRs if you find versioning problems.</p>\n<p>ThreeJS distinguishes between an array of THREE.Vector3 objects, and a flattened <code>vec3</code> type represented by floats (<code>v3v</code> vs <code>fv</code>). This module only sees the <code>vec3</code> array type, and assumes they are to be represented by an array of THREE.Vector3 elements. Same with <code>ivec3</code>, <code>vec4</code>, etc. </p>\n<h2 id=\"license\">License</h2>\n<p>MIT, see <a href=\"http://github.com/mattdesl/three-glslify/blob/master/LICENSE.md\">LICENSE.md</a> for details.</p>\n"}
{"readme":"<h1 class=\"title\"><a target=\"_blank\" href=\"https://github.com/mattdesl/canvas-loop\">canvas-loop</a><div class=\"contrib\"></div></h1>\n<p><a href=\"http://github.com/badges/stability-badges\"></a></p>\n<p><iframe scrolling=\"no\" seamless=\"seamless\" src=\"http://mattdesl.github.io/canvas-loop/\"></iframe></p>\n<p><a href=\"http://mattdesl.github.io/canvas-loop/\">demo</a> - <a href=\"http://github.com/mattdesl/canvas-loop/blob/master/demo.es6\">source</a></p>\n<p>Yet another canvas shell utility, built on <a href=\"https://npmjs.org/package/canvas-fit\">canvas-fit</a> and <a href=\"https://npmjs.org/package/raf-loop\">raf-loop</a>. Useful for full-screen retina canvas demos.</p>\n<p>Example:</p>\n<pre><code class=\"lang-js\"><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;createGL&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>webgl-context</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;createLoop&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>canvas-loop</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>&#xA0;get&#xA0;a&#xA0;WebGL&#xA0;context</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;gl&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"meta function-call js\"><span class=\"entity name function js\"><span>createGL</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;canvas&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"variable other object js\"><span>gl</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>canvas</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"variable other object js\"><span>document</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"support constant dom js\"><span>body</span></span><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function dom js\"><span>appendChild</span></span><span class=\"meta brace round js\"><span>(</span></span><span>canvas</span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>&#xA0;setup&#xA0;a&#xA0;retina-scaled&#xA0;canvas</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;app&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"meta function-call js\"><span class=\"entity name function js\"><span>createLoop</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span>canvas</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span>&#xA0;&#xA0;scale</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"variable other object js\"><span>window</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>devicePixelRatio</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"meta brace curly js\"><span>}</span></span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>&#xA0;start&#xA0;rendering</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"variable other object js\"><span>app</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"support constant dom js\"><span>start</span></span><span class=\"meta brace round js\"><span>(</span><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>&#xA0;on&#xA0;requestAnimationFrame</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"variable other object js\"><span>app</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>on</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>tick</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span class=\"punctuation definition parameters begin js\"><span>(</span></span><span class=\"variable parameter function js\"><span>dt</span></span><span class=\"punctuation definition parameters end js\"><span>)</span></span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"punctuation whitespace comment leading js\"><span>&#xA0;&#xA0;</span></span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>&#xA0;do&#xA0;some&#xA0;rendering</span><span>&#xA0;</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;&#xA0;</span><span class=\"variable other object js\"><span>gl</span></span><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js console\"><span>clear</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"variable other object js\"><span>gl</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"constant other property js\"><span>COLOR_BUFFER_BIT</span></span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta brace curly js\"><span>}</span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>&#xA0;handle&#xA0;window&#xA0;resize</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"variable other object js\"><span>app</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>on</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>resize</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span class=\"punctuation definition parameters begin js\"><span>(</span></span><span class=\"punctuation definition parameters end js\"><span>)</span></span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"punctuation whitespace comment leading js\"><span>&#xA0;&#xA0;</span></span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>&#xA0;the&#xA0;unscaled&#xA0;size</span><span>&#xA0;</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;&#xA0;</span><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;width&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"variable other object js\"><span>app</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"support constant dom js\"><span>shape</span></span><span class=\"meta brace square js\"><span>[</span></span><span class=\"constant numeric js\"><span>0</span></span><span class=\"meta brace square js\"><span>]</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;&#xA0;</span><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;height&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"variable other object js\"><span>app</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"support constant dom js\"><span>shape</span></span><span class=\"meta brace square js\"><span>[</span></span><span class=\"constant numeric js\"><span>1</span></span><span class=\"meta brace square js\"><span>]</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;&#xA0;</span><span class=\"entity name type object js console\"><span>console</span></span><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js console\"><span>log</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>new&#xA0;canvas&#xA0;size</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;width</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;height</span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta brace curly js\"><span>}</span></span><span class=\"meta brace round js\"><span>)</span></span></span></div>\n</code></pre>\n<p>See <a href=\"http://github.com/mattdesl/canvas-loop/blob/master/demo.es6\">demo.es6</a> for a full demo.</p>\n<h2 id=\"usage\">Usage</h2>\n<p><a href=\"https://www.npmjs.com/package/canvas-loop\"></a></p>\n<h4 id=\"-app-createloop-canvas-opt-\"><code>app = createLoop(canvas[, opt])</code></h4>\n<p>Creates a new loop with the given <code>canvas</code> (can be <a href=\"https://www.npmjs.com/package/2d-context\">2D</a> or <a href=\"https://www.npmjs.com/package/webgl-context\">WebGL</a>). </p>\n<p>The options:</p>\n<ul>\n<li><code>parent</code> element to fit to, or a scaling function (default <code>window</code>)</li>\n<li><code>scale</code> scaling ratio for canvas (default 1)</li>\n</ul>\n<p>These options are passed to <a href=\"https://github.com/hughsk/canvas-fit/\">canvas-fit</a>.</p>\n<h4 id=\"-app-start-\"><code>app.start()</code></h4>\n<h4 id=\"-app-stop-\"><code>app.stop()</code></h4>\n<p>Start and stop the render loop. Returns the <code>app</code> for chaining.</p>\n<h4 id=\"-app-on-tick-fn-\"><code>app.on(&apos;tick&apos;, fn)</code></h4>\n<p>Listen to <code>tick</code> events, <code>fn</code> is called with <code>dt</code> parameter which is the delta time since last frame. Uses <a href=\"https://www.npmjs.com/package/raf-loop\">raf-loop</a>.</p>\n<h4 id=\"-app-on-resize-fn-\"><code>app.on(&apos;resize&apos;, fn)</code></h4>\n<p>Called when the <code>window</code> has resized, after the canvas has been re-scaled according to its <code>parent</code>.</p>\n<h4 id=\"-app-shape-\"><code>app.shape</code></h4>\n<p>A getter for the <code>[ width, height ]</code> of the canvas <em>without</em> device scaling. This is the same as:</p>\n<pre><code>[ canvas.width / app.scale, canvas.height / app.scale ]\n</code></pre><h4 id=\"-app-parent-\"><code>app.parent</code></h4>\n<h4 id=\"-app-scale-\"><code>app.scale</code></h4>\n<p>Getters/setters to change <code>parent</code> or <code>scale</code> at runtime. See <a href=\"https://www.npmjs.com/package/canvas-fit\">canvas-fit</a> for details.</p>\n<h2 id=\"license\">License</h2>\n<p>MIT, see <a href=\"http://github.com/mattdesl/canvas-loop/blob/master/LICENSE.md\">LICENSE.md</a> for details.</p>\n"}
{"readme":"<h1 class=\"title\"><a target=\"_blank\" href=\"https://github.com/stackgl/gl-fbo\">gl-fbo</a><div class=\"contrib\"></div></h1>\n<p>WebGL framebuffer object wrapper</p>\n<iframe scrolling=\"no\" seamless=\"seamless\" src=\"http://stack.gl/gl-fbo/\"></iframe><h2 id=\"example\">Example</h2>\n<p><a href=\"http://stackgl.github.io/gl-fbo/\">Try this in your browser if you have WebGL</a></p>\n<pre><code class=\"lang-javascript\"><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;shell&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted double js\"><span class=\"punctuation definition string begin js\"><span>&quot;</span></span><span>gl-now</span><span class=\"punctuation definition string end js\"><span>&quot;</span></span></span><span class=\"meta brace round js\"><span>)</span><span>(</span><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;createFBO&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted double js\"><span class=\"punctuation definition string begin js\"><span>&quot;</span></span><span>gl-fbo</span><span class=\"punctuation definition string end js\"><span>&quot;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;glslify&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted double js\"><span class=\"punctuation definition string begin js\"><span>&quot;</span></span><span>glslify</span><span class=\"punctuation definition string end js\"><span>&quot;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;ndarray&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted double js\"><span class=\"punctuation definition string begin js\"><span>&quot;</span></span><span>ndarray</span><span class=\"punctuation definition string end js\"><span>&quot;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;fill&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted double js\"><span class=\"punctuation definition string begin js\"><span>&quot;</span></span><span>ndarray-fill</span><span class=\"punctuation definition string end js\"><span>&quot;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;fillScreen&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted double js\"><span class=\"punctuation definition string begin js\"><span>&quot;</span></span><span>a-big-triangle</span><span class=\"punctuation definition string end js\"><span>&quot;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;createUpdateShader&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"meta function-call js\"><span class=\"entity name function js\"><span>glslify</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span class=\"meta brace curly js\"><span>{</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span>&#xA0;&#xA0;vertex</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"string quoted double js\"><span class=\"punctuation definition string begin js\"><span>&quot;</span></span><span>\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;attribute&#xA0;vec2&#xA0;position;\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;varying&#xA0;vec2&#xA0;uv;\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;void&#xA0;main()&#xA0;{\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;gl_Position&#xA0;=&#xA0;vec4(position,0.0,1.0);\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;uv&#xA0;=&#xA0;0.5&#xA0;*&#xA0;(position+1.0);\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;}</span><span class=\"punctuation definition string end js\"><span>&quot;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span>&#xA0;&#xA0;fragment</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"string quoted double js\"><span class=\"punctuation definition string begin js\"><span>&quot;</span></span><span>\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;precision&#xA0;mediump&#xA0;float;\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;uniform&#xA0;sampler2D&#xA0;buffer;\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;uniform&#xA0;vec2&#xA0;dims;\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;varying&#xA0;vec2&#xA0;uv;\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;void&#xA0;main()&#xA0;{\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;float&#xA0;n&#xA0;=&#xA0;0.0;\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;for(int&#xA0;dx=-1;&#xA0;dx&lt;=1;&#xA0;++dx)\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;for(int&#xA0;dy=-1;&#xA0;dy&lt;=1;&#xA0;++dy)&#xA0;{\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;n&#xA0;+=&#xA0;texture2D(buffer,&#xA0;uv+vec2(dx,dy)/dims).r;\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;}\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;float&#xA0;s&#xA0;=&#xA0;texture2D(buffer,&#xA0;uv).r;\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;if(n&#xA0;&gt;&#xA0;3.0+s&#xA0;||&#xA0;n&#xA0;&lt;&#xA0;3.0)&#xA0;{\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;gl_FragColor&#xA0;=&#xA0;vec4(0,0,0,1);\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;}&#xA0;else&#xA0;{\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;gl_FragColor&#xA0;=&#xA0;vec4(1,1,1,1);\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;}\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;}</span><span class=\"punctuation definition string end js\"><span>&quot;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span>&#xA0;&#xA0;inline</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"constant language boolean true js\"><span>true</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"meta brace curly js\"><span>}</span></span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;createDrawShader&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"meta function-call js\"><span class=\"entity name function js\"><span>glslify</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span class=\"meta brace curly js\"><span>{</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span>&#xA0;&#xA0;vertex</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"string quoted double js\"><span class=\"punctuation definition string begin js\"><span>&quot;</span></span><span>\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;attribute&#xA0;vec2&#xA0;position;\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;varying&#xA0;vec2&#xA0;uv;\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;void&#xA0;main()&#xA0;{\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;gl_Position&#xA0;=&#xA0;vec4(position,0.0,1.0);\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;uv&#xA0;=&#xA0;0.5&#xA0;*&#xA0;(position+1.0);\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;}</span><span class=\"punctuation definition string end js\"><span>&quot;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span>&#xA0;&#xA0;fragment</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"string quoted double js\"><span class=\"punctuation definition string begin js\"><span>&quot;</span></span><span>\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;precision&#xA0;mediump&#xA0;float;\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;uniform&#xA0;sampler2D&#xA0;buffer;\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;varying&#xA0;vec2&#xA0;uv;\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;void&#xA0;main()&#xA0;{\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;gl_FragColor&#xA0;=&#xA0;texture2D(buffer,&#xA0;uv);\\</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"string quoted double js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;}</span><span class=\"punctuation definition string end js\"><span>&quot;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span>&#xA0;&#xA0;inline</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"constant language boolean true js\"><span>true</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span class=\"meta brace curly js\"><span>}</span></span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;state</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;updateShader</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;drawShader</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;current&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>0</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"variable other object js\"><span>shell</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>on</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span class=\"string quoted double js\"><span class=\"punctuation definition string begin js\"><span>&quot;</span></span><span>gl-init</span><span class=\"punctuation definition string end js\"><span>&quot;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span class=\"punctuation definition parameters begin js\"><span>(</span></span><span class=\"punctuation definition parameters end js\"><span>)</span></span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;&#xA0;</span><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;gl&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"variable other object js\"><span>shell</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>gl</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"punctuation whitespace comment leading js\"><span>&#xA0;&#xA0;</span></span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>Turn&#xA0;off&#xA0;depth&#xA0;test</span><span>&#xA0;</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;&#xA0;</span><span class=\"variable other object js\"><span>gl</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>disable</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span class=\"variable other object js\"><span>gl</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"constant other property js\"><span>DEPTH_TEST</span></span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"punctuation whitespace comment leading js\"><span>&#xA0;&#xA0;</span></span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>Initialize&#xA0;shaders</span><span>&#xA0;</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;&#xA0;updateShader&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"meta function-call js\"><span class=\"entity name function js\"><span>createUpdateShader</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span>gl</span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;&#xA0;drawShader&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"meta function-call js\"><span class=\"entity name function js\"><span>createDrawShader</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span>gl</span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"punctuation whitespace comment leading js\"><span>&#xA0;&#xA0;</span></span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>Allocate&#xA0;buffers</span><span>&#xA0;</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;&#xA0;state&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"meta brace square js\"><span>[</span></span><span>&#xA0;</span><span class=\"meta function-call js\"><span class=\"entity name function js\"><span>createFBO</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span>gl</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"meta brace square js\"><span>[</span></span><span class=\"constant numeric js\"><span>512</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>512</span></span><span class=\"meta brace square js\"><span>]</span></span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"meta function-call js\"><span class=\"entity name function js\"><span>createFBO</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span>gl</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"meta brace square js\"><span>[</span></span><span class=\"constant numeric js\"><span>512</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>512</span></span><span class=\"meta brace square js\"><span>]</span></span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span><span>&#xA0;</span><span class=\"meta brace square js\"><span>]</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"punctuation whitespace comment leading js\"><span>&#xA0;&#xA0;</span></span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>Initialize&#xA0;state&#xA0;buffer</span><span>&#xA0;</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;&#xA0;</span><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;initial_conditions&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"meta function-call js\"><span class=\"entity name function js\"><span>ndarray</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span class=\"meta class instance constructor\"><span class=\"keyword operator new js\"><span>new</span></span><span>&#xA0;</span><span class=\"entity name type instance js\"><span>Uint8Array</span></span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"constant numeric js\"><span>512</span></span><span class=\"keyword operator js\"><span>*</span></span><span class=\"constant numeric js\"><span>512</span></span><span class=\"keyword operator js\"><span>*</span></span><span class=\"constant numeric js\"><span>4</span></span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"meta brace square js\"><span>[</span></span><span class=\"constant numeric js\"><span>512</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>512</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>4</span></span><span class=\"meta brace square js\"><span>]</span></span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta function-call js\"><span class=\"entity name function js\"><span>fill</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span>initial_conditions</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span class=\"punctuation definition parameters begin js\"><span>(</span></span><span class=\"variable parameter function js\"><span>x</span></span><span class=\"meta object delimiter js\"><span>,</span></span><span class=\"variable parameter function js\"><span>y</span></span><span class=\"meta object delimiter js\"><span>,</span></span><span class=\"variable parameter function js\"><span>c</span></span><span class=\"punctuation definition parameters end js\"><span>)</span></span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function-call js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"keyword control js\"><span>if</span></span><span class=\"meta brace round js\"><span>(</span></span><span>c&#xA0;</span><span class=\"keyword operator comparison js\"><span>===</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>3</span></span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"keyword control js\"><span>return</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>255</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"meta brace curly js\"><span>}</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"keyword control js\"><span>return</span></span><span>&#xA0;</span><span class=\"variable other object js\"><span>Math</span></span><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js\"><span>random</span></span><span class=\"meta brace round js\"><span>(</span><span>)</span></span><span>&#xA0;</span><span class=\"keyword operator comparison js\"><span>&gt;</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>0.9</span></span><span>&#xA0;</span><span class=\"keyword operator js\"><span>?</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>255</span></span><span>&#xA0;</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>0</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta brace curly js\"><span>}</span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;state</span><span class=\"meta brace square js\"><span>[</span></span><span class=\"constant numeric js\"><span>0</span></span><span class=\"meta brace square js\"><span>]</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"support constant dom js\"><span>color</span></span><span class=\"meta brace square js\"><span>[</span></span><span class=\"constant numeric js\"><span>0</span></span><span class=\"meta brace square js\"><span>]</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>setPixels</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span>initial_conditions</span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"punctuation whitespace comment leading js\"><span>&#xA0;&#xA0;</span></span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>Set&#xA0;up&#xA0;vertex&#xA0;pointers</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"variable other object js\"><span>drawShader</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"support constant dom js\"><span>attributes</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>position</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"support constant js\"><span>location</span></span><span>&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"variable other object js\"><span>updateShader</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"support constant dom js\"><span>attributes</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>position</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"support constant js\"><span>location</span></span><span>&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>0</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta brace curly js\"><span>}</span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"variable other object js\"><span>shell</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>on</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span class=\"string quoted double js\"><span class=\"punctuation definition string begin js\"><span>&quot;</span></span><span>tick</span><span class=\"punctuation definition string end js\"><span>&quot;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span class=\"punctuation definition parameters begin js\"><span>(</span></span><span class=\"punctuation definition parameters end js\"><span>)</span></span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;&#xA0;</span><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;gl&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"variable other object js\"><span>shell</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>gl</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;&#xA0;</span><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;prevState&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;state</span><span class=\"meta brace square js\"><span>[</span></span><span>current</span><span class=\"meta brace square js\"><span>]</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;&#xA0;</span><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;curState&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;state</span><span class=\"meta brace square js\"><span>[</span></span><span>current&#xA0;</span><span class=\"keyword operator assignment compound bitwise js\"><span>^=</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>1</span></span><span class=\"meta brace square js\"><span>]</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"punctuation whitespace comment leading js\"><span>&#xA0;&#xA0;</span></span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>Switch&#xA0;to&#xA0;state&#xA0;fbo</span><span>&#xA0;</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;&#xA0;</span><span class=\"variable other object js\"><span>curState</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>bind</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"punctuation whitespace comment leading js\"><span>&#xA0;&#xA0;</span></span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>Run&#xA0;update&#xA0;shader</span><span>&#xA0;</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;&#xA0;</span><span class=\"variable other object js\"><span>updateShader</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>bind</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;&#xA0;</span><span class=\"variable other object js\"><span>updateShader</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>uniforms</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>buffer</span></span><span>&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"variable other object js\"><span>prevState</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"support constant dom js\"><span>color</span></span><span class=\"meta brace square js\"><span>[</span></span><span class=\"constant numeric js\"><span>0</span></span><span class=\"meta brace square js\"><span>]</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>bind</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;&#xA0;</span><span class=\"variable other object js\"><span>updateShader</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>uniforms</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>dims</span></span><span>&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"variable other object js\"><span>prevState</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"support constant dom js\"><span>shape</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;&#xA0;</span><span class=\"meta function-call js\"><span class=\"entity name function js\"><span>fillScreen</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span>gl</span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"meta brace curly js\"><span>}</span></span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"variable other object js\"><span>shell</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>on</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span class=\"string quoted double js\"><span class=\"punctuation definition string begin js\"><span>&quot;</span></span><span>gl-render</span><span class=\"punctuation definition string end js\"><span>&quot;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span class=\"punctuation definition parameters begin js\"><span>(</span></span><span class=\"variable parameter function js\"><span>t</span></span><span class=\"punctuation definition parameters end js\"><span>)</span></span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;&#xA0;</span><span class=\"storage type var js\"><span>var</span></span><span>&#xA0;gl&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"variable other object js\"><span>shell</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>gl</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"punctuation whitespace comment leading js\"><span>&#xA0;&#xA0;</span></span><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>Render&#xA0;contents&#xA0;of&#xA0;buffer&#xA0;to&#xA0;screen</span><span>&#xA0;</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;&#xA0;</span><span class=\"variable other object js\"><span>drawShader</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>bind</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;&#xA0;</span><span class=\"variable other object js\"><span>drawShader</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>uniforms</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"variable other property js\"><span>buffer</span></span><span>&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;state</span><span class=\"meta brace square js\"><span>[</span></span><span>current</span><span class=\"meta brace square js\"><span>]</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"support constant dom js\"><span>color</span></span><span class=\"meta brace square js\"><span>[</span></span><span class=\"constant numeric js\"><span>0</span></span><span class=\"meta brace square js\"><span>]</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>bind</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span>&#xA0;&#xA0;</span><span class=\"meta function-call js\"><span class=\"entity name function js\"><span>fillScreen</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span>gl</span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta method-call js\"><span class=\"meta brace curly js\"><span>}</span></span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span></span></div>\n</code></pre>\n<p>Result:</p>\n<p><img src=\"https://raw.github.com/stackgl/gl-fbo/master/screenshot.png\"></p>\n<h2 id=\"install\">Install</h2>\n<p>Install using npm:</p>\n<pre><code>npm install gl-fbo\n</code></pre><h2 id=\"api\">API</h2>\n<h3 id=\"-var-createfbo-require-gl-fbo-\"><code>var createFBO = require(&quot;gl-fbo&quot;)</code></h3>\n<h2 id=\"constructor\">Constructor</h2>\n<p>There is currently only one default way to create a Framebuffer object.  You can construct a framebuffer using the following syntax:</p>\n<h3 id=\"-var-fbo-createfbo-gl-shape-options-\"><code>var fbo = createFBO(gl, shape[, options])</code></h3>\n<p>Creates a wrapped framebuffer object</p>\n<ul>\n<li><code>gl</code> is a handle to a WebGL context</li>\n<li><code>shape</code> is a length 2 array encoding the <code>[width, height]</code> of the frame buffer</li>\n<li><p><code>options</code> is an object containing the following optional properties:</p>\n<ul>\n<li><code>options.preferFloat</code> Upgrade to floating point if available, otherwise fallback to 8bit. (default <code>false</code>)</li>\n<li><code>options.float</code> Use floating point textures (default <code>false</code>)</li>\n<li><code>options.color</code>  The number of color buffers to create (default <code>1</code>)</li>\n<li><code>options.depth</code> If fbo has a depth buffer (default: <code>true</code>)</li>\n<li><code>options.stencil</code> If fbo has a stencil buffer (default: <code>false</code>)</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"methods\">Methods</h2>\n<h3 id=\"-fbo-bind-\"><code>fbo.bind()</code></h3>\n<p>Binds the framebuffer object to the display.  To rebind the original drawing buffer, you can just call WebGL directly:</p>\n<pre><code class=\"lang-javascript\"><div class=\"line\"><span class=\"source js\"><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>Bind&#xA0;the&#xA0;drawing&#xA0;buffer</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"variable other object js\"><span>gl</span></span><span class=\"meta method-call js\"><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"entity name function js\"><span>bindFramebuffer</span></span><span class=\"punctuation definition arguments begin js\"><span>(</span></span><span class=\"variable other object js\"><span>gl</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"constant other property js\"><span>FRAMEBUFFER</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"constant language null js\"><span>null</span></span><span class=\"punctuation definition arguments end js\"><span>)</span></span></span></span></div>\n</code></pre>\n<h3 id=\"-fbo-dispose-\"><code>fbo.dispose()</code></h3>\n<p>Destroys the framebuffer object and releases all associated resources</p>\n<h2 id=\"properties\">Properties</h2>\n<h3 id=\"-fbo-shape-\"><code>fbo.shape</code></h3>\n<p>Returns the shape of the frame buffer object.  Writing to this property resizes the framebuffer.  For example,</p>\n<pre><code class=\"lang-javascript\"><div class=\"line\"><span class=\"source js\"><span class=\"variable other object js\"><span>fbo</span></span><span class=\"meta delimiter property period js\"><span>.</span></span><span class=\"support constant dom js\"><span>shape</span></span><span>&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"meta brace square js\"><span>[</span></span><span>&#xA0;newWidth</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;newHeight&#xA0;</span><span class=\"meta brace square js\"><span>]</span></span></span></div>\n</code></pre>\n<h3 id=\"-fbo-gl-\"><code>fbo.gl</code></h3>\n<p>A reference to the WebGL context</p>\n<h3 id=\"-fbo-handle-\"><code>fbo.handle</code></h3>\n<p>A handle to the underlying Framebuffer object.</p>\n<h3 id=\"-fbo-color-\"><code>fbo.color</code></h3>\n<p>An array containing <a href=\"https://github.com/stackgl/gl-texture2d\"><code>gl-texture2d</code></a> objects representing the buffers.  </p>\n<h3 id=\"-fbo-depth-\"><code>fbo.depth</code></h3>\n<p>The depth/stencil component of the FBO.  Stored as a <a href=\"https://github.com/stackgl/gl-texture2d\"><code>gl-texture2d</code></a>.  If not present, is <code>null</code>.</p>\n<h2 id=\"credits\">Credits</h2>\n<p>(c) 2013-2014 Mikola Lysenko. MIT License</p>\n"}
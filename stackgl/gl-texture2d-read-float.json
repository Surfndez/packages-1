{"readme":"<h1 class=\"title\"><a target=\"_blank\" href=\"https://github.com/stackgl/gl-texture2d-read-float\">gl-texture2d-read-float</a><div class=\"contrib\"></div></h1>\n<p><a href=\"http://github.com/badges/stability-badges\"></a></p>\n<p>Read out the contents of a floating-point\n<a href=\"http://github.com/stackgl/gl-texture2d\">gl-texture2d</a>.</p>\n<p>This will <em>eventually</em> be supported natively in WebGL\n<a href=\"https://www.khronos.org/opengles/sdk/docs/man31/html/glReadPixels.xhtml\">(it&apos;s listed in the OpenGL ES 3 spec)</a>,\nbut this fills that need until then!</p>\n<h2 id=\"usage\">Usage</h2>\n<p><a href=\"https://nodei.co/npm/gl-texture2d-read-float/\"></a></p>\n<h3 id=\"-read-gltex2d-done-err-data-\"><code>read(glTex2d, done(err, data))</code></h3>\n<p>Reads out the contents of <code>glTex2d</code>, which should be an instance of\n<code>gl-texture2d</code>. When complete, <code>done(err, data)</code> will be called where <code>data</code> is\na <code>Float32Array</code> containing the resulting floats in the texture.</p>\n<pre><code class=\"lang-javascript\"><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>const</span></span><span>&#xA0;</span><span class=\"constant other js\"><span>canvas</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"keyword operator js\"><span>=</span></span><span>&#xA0;</span><span class=\"support class js\"><span>document</span></span><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function dom js\"><span>createElement</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>canvas</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>const</span></span><span>&#xA0;</span><span class=\"constant other js\"><span>gl</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"keyword operator js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>gl-context</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span><span>(</span></span><span>canvas</span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>const</span></span><span>&#xA0;</span><span class=\"constant other js\"><span>read</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"keyword operator js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>gl-texture2d-read-float</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>const</span></span><span>&#xA0;</span><span class=\"constant other js\"><span>Texture2d</span></span><span>&#xA0;</span><span class=\"keyword operator js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>gl-texture2d</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>const</span></span><span>&#xA0;</span><span class=\"constant other js\"><span>baboon</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"keyword operator js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>baboon-image</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>const</span></span><span>&#xA0;</span><span class=\"constant other js\"><span>assert</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"keyword operator js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>assert</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>const</span></span><span>&#xA0;</span><span class=\"constant other js\"><span>texture</span></span><span>&#xA0;&#xA0;</span><span class=\"keyword operator js\"><span>=</span></span><span>&#xA0;</span><span>baboon</span><span class=\"meta brace round js\"><span>(</span></span><span>gl</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;baboon</span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>read</span><span class=\"meta brace round js\"><span>(</span></span><span>texture</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span class=\"punctuation definition parameters begin js\"><span>(</span></span><span class=\"variable parameter function js\"><span>err</span></span><span>,&#xA0;</span><span class=\"variable parameter function js\"><span>data</span></span><span class=\"punctuation definition parameters end js\"><span>)</span></span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"keyword control js\"><span>if</span></span><span>&#xA0;</span><span class=\"meta brace round js\"><span>(</span></span><span>err</span><span class=\"meta brace round js\"><span>)</span></span><span>&#xA0;</span><span class=\"keyword control js\"><span>throw</span></span><span>&#xA0;err</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;assert</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>deepEqual</span><span class=\"meta brace round js\"><span>(</span></span><span>data</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;baboon</span><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support constant dom js\"><span>data</span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta brace curly js\"><span>}</span></span><span class=\"meta brace round js\"><span>)</span></span></span></div>\n</code></pre>\n<p>A few things to note:</p>\n<ul>\n<li>Right now, this is slow as it requires reading data back from the GPU.\nThere&apos;s not much that can be done about this for the time being unfortunately.</li>\n<li>The data is retrieved synchronously under the hood, but the API has been made\nasynchronous in preparation for WebGL&apos;s eventual async <code>readPixels</code> equivalent.</li>\n<li>Only <code>gl.RGBA</code>/<code>gl.FLOAT</code> textures are currently supported. Pull requests are,\nhowever, very welcome! :)</li>\n</ul>\n<h2 id=\"contributing\">Contributing</h2>\n<p>See <a href=\"https://github.com/stackgl/contributing\">stackgl/contributing</a> for details.</p>\n<h2 id=\"license\">License</h2>\n<p>MIT. See <a href=\"http://github.com/stackgl/gl-texture2d-read-float/blob/master/LICENSE.md\">LICENSE.md</a> for details.</p>\n"}
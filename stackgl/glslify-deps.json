{"readme":"<h1 class=\"title\"><a target=\"_blank\" href=\"https://github.com/stackgl/glslify-deps\">glslify-deps</a><div class=\"contrib\"></div></h1>\n<p>Walk the dependency graph of a <a href=\"http://github.com/stackgl/glslify\">glslify</a>\nshader.</p>\n<p><code>glslify-deps</code> is responsible for resolving your shader&apos;s dependencies and\napplying their transforms before the actual source modification occurs. You may\nnotice some parallels here with <a href=\"http://browserify.org\">browserify</a>&apos;s\n<a href=\"http://github.com/substack/module-deps\">module-deps</a> package.</p>\n<p>While <code>glslify-deps</code> is an &quot;internal&quot; package for <code>glslify</code>, it may be useful\nto use this package directly in specific cases, e.g. building a file tree\nserver-side but bundling the final shader on the client.</p>\n<h2 id=\"module-api\">Module API</h2>\n<h3 id=\"-depper-glslifydeps-options-\"><code>depper = glslifyDeps([options])</code></h3>\n<p>Creates a fresh <code>glslify-deps</code> instance. Accepts the following options:</p>\n<ul>\n<li><code>cwd</code>: the current working directory to resolve relative file paths from.</li>\n<li><code>readFile</code>: pass in a custom function reading files.</li>\n<li><code>resolve</code>: pass in a custom function for resolving require calls. It has\nthe same signature as <a href=\"http://github.com/hughsk/glsl-resolve\">glsl-resolve</a>.</li>\n<li><code>files</code>: a filename/source object mapping of files to prepopulate\nthe file cache with. Useful for overriding particular file paths manually,\nmost notably the &quot;entry&quot; file.</li>\n</ul>\n<h3 id=\"-depper-transform-transform-options-\"><code>depper.transform(transform, [options])</code></h3>\n<p>Adds a new transform &#x2013; should be used before calling <code>depper.add</code>.</p>\n<p><code>transform</code> may either be a string (which is resolved like a <code>require</code> call),\nor a function. More information on transforms can be found below.</p>\n<h3 id=\"-depper-add-filename-callback-\"><code>depper.add(filename, [callback])</code></h3>\n<p>Adds a new file to the dependency graph.</p>\n<h3 id=\"-depper-inline-source-basedir-callback-\"><code>depper.inline(source, basedir, [callback])</code></h3>\n<p>Adds a new inline file to the dependency graph, where <code>source</code> is the GLSL\nsource to include and <code>basedir</code> is the directory to pretend it&apos;s being\ncreated in. A <code>basedir</code> is required to properly resolve requires and transforms,\nand defaults to <code>process.cwd()</code>.</p>\n<h3 id=\"-depper-on-file-cb-filename-\"><code>depper.on(&apos;file&apos;, cb(filename))</code></h3>\n<p>Emitted whenever a new file has been included in the dependency graph.</p>\n<h2 id=\"example-output\">Example Output</h2>\n<pre><code class=\"lang-json\"><div class=\"line\"><span class=\"source json\"><span class=\"meta structure array json\"><span class=\"punctuation definition array begin json\"><span>[</span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure array json\"><span>&#xA0;&#xA0;</span><span class=\"meta structure dictionary json\"><span class=\"punctuation definition dictionary begin json\"><span>{</span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure array json\"><span class=\"meta structure dictionary json\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"string quoted double json\"><span class=\"punctuation definition string begin json\"><span>&quot;</span></span><span>id</span><span class=\"punctuation definition string end json\"><span>&quot;</span></span></span><span class=\"meta structure dictionary value json\"><span class=\"punctuation separator dictionary key-value json\"><span>:</span></span><span>&#xA0;</span><span class=\"constant numeric json\"><span>0</span></span><span class=\"punctuation separator dictionary pair json\"><span>,</span></span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure array json\"><span class=\"meta structure dictionary json\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"string quoted double json\"><span class=\"punctuation definition string begin json\"><span>&quot;</span></span><span>deps</span><span class=\"punctuation definition string end json\"><span>&quot;</span></span></span><span class=\"meta structure dictionary value json\"><span class=\"punctuation separator dictionary key-value json\"><span>:</span></span><span>&#xA0;</span><span class=\"meta structure dictionary json\"><span class=\"punctuation definition dictionary begin json\"><span>{</span></span><span>&#xA0;</span><span class=\"string quoted double json\"><span class=\"punctuation definition string begin json\"><span>&quot;</span></span><span>glsl-random</span><span class=\"punctuation definition string end json\"><span>&quot;</span></span></span><span class=\"meta structure dictionary value json\"><span class=\"punctuation separator dictionary key-value json\"><span>:</span></span><span>&#xA0;</span><span class=\"constant numeric json\"><span>1</span></span><span>&#xA0;</span></span><span class=\"punctuation definition dictionary end json\"><span>}</span></span></span><span class=\"punctuation separator dictionary pair json\"><span>,</span></span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure array json\"><span class=\"meta structure dictionary json\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"string quoted double json\"><span class=\"punctuation definition string begin json\"><span>&quot;</span></span><span>file</span><span class=\"punctuation definition string end json\"><span>&quot;</span></span></span><span class=\"meta structure dictionary value json\"><span class=\"punctuation separator dictionary key-value json\"><span>:</span></span><span>&#xA0;</span><span class=\"string quoted double json\"><span class=\"punctuation definition string begin json\"><span>&quot;</span></span><span>index.glsl</span><span class=\"punctuation definition string end json\"><span>&quot;</span></span></span><span class=\"punctuation separator dictionary pair json\"><span>,</span></span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure array json\"><span class=\"meta structure dictionary json\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"string quoted double json\"><span class=\"punctuation definition string begin json\"><span>&quot;</span></span><span>source</span><span class=\"punctuation definition string end json\"><span>&quot;</span></span></span><span class=\"meta structure dictionary value json\"><span class=\"punctuation separator dictionary key-value json\"><span>:</span></span><span>&#xA0;</span><span class=\"string quoted double json\"><span class=\"punctuation definition string begin json\"><span>&quot;</span></span><span>precision&#xA0;mediump&#xA0;float;</span><span class=\"constant character escape json\"><span>\\n</span></span><span>#pragma&#xA0;glslify:&#xA0;random&#xA0;=&#xA0;require(glsl-random)</span><span class=\"constant character escape json\"><span>\\n</span></span><span class=\"punctuation definition string end json\"><span>&quot;</span></span></span><span class=\"punctuation separator dictionary pair json\"><span>,</span></span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure array json\"><span class=\"meta structure dictionary json\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"string quoted double json\"><span class=\"punctuation definition string begin json\"><span>&quot;</span></span><span>entry</span><span class=\"punctuation definition string end json\"><span>&quot;</span></span></span><span class=\"meta structure dictionary value json\"><span class=\"punctuation separator dictionary key-value json\"><span>:</span></span><span>&#xA0;</span><span class=\"constant language json\"><span>true</span></span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure array json\"><span class=\"meta structure dictionary json\"><span class=\"meta structure dictionary value json\"><span>&#xA0;&#xA0;</span></span><span class=\"punctuation definition dictionary end json\"><span>}</span></span></span><span class=\"punctuation separator array json\"><span>,</span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure array json\"><span>&#xA0;&#xA0;</span><span class=\"meta structure dictionary json\"><span class=\"punctuation definition dictionary begin json\"><span>{</span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure array json\"><span class=\"meta structure dictionary json\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"string quoted double json\"><span class=\"punctuation definition string begin json\"><span>&quot;</span></span><span>id</span><span class=\"punctuation definition string end json\"><span>&quot;</span></span></span><span class=\"meta structure dictionary value json\"><span class=\"punctuation separator dictionary key-value json\"><span>:</span></span><span>&#xA0;</span><span class=\"constant numeric json\"><span>1</span></span><span class=\"punctuation separator dictionary pair json\"><span>,</span></span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure array json\"><span class=\"meta structure dictionary json\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"string quoted double json\"><span class=\"punctuation definition string begin json\"><span>&quot;</span></span><span>deps</span><span class=\"punctuation definition string end json\"><span>&quot;</span></span></span><span class=\"meta structure dictionary value json\"><span class=\"punctuation separator dictionary key-value json\"><span>:</span></span><span>&#xA0;</span><span class=\"meta structure dictionary json\"><span class=\"punctuation definition dictionary begin json\"><span>{</span></span><span class=\"punctuation definition dictionary end json\"><span>}</span></span></span><span class=\"punctuation separator dictionary pair json\"><span>,</span></span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure array json\"><span class=\"meta structure dictionary json\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"string quoted double json\"><span class=\"punctuation definition string begin json\"><span>&quot;</span></span><span>file</span><span class=\"punctuation definition string end json\"><span>&quot;</span></span></span><span class=\"meta structure dictionary value json\"><span class=\"punctuation separator dictionary key-value json\"><span>:</span></span><span>&#xA0;</span><span class=\"string quoted double json\"><span class=\"punctuation definition string begin json\"><span>&quot;</span></span><span>node_modules/glsl-random/index.glsl</span><span class=\"punctuation definition string end json\"><span>&quot;</span></span></span><span class=\"punctuation separator dictionary pair json\"><span>,</span></span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure array json\"><span class=\"meta structure dictionary json\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"string quoted double json\"><span class=\"punctuation definition string begin json\"><span>&quot;</span></span><span>source</span><span class=\"punctuation definition string end json\"><span>&quot;</span></span></span><span class=\"meta structure dictionary value json\"><span class=\"punctuation separator dictionary key-value json\"><span>:</span></span><span>&#xA0;</span><span class=\"string quoted double json\"><span class=\"punctuation definition string begin json\"><span>&quot;</span></span><span>highp&#xA0;float&#xA0;random(vec2&#xA0;co)</span><span class=\"constant character escape json\"><span>\\n</span></span><span>{</span><span class=\"constant character escape json\"><span>\\n</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;highp&#xA0;float&#xA0;a&#xA0;=&#xA0;12.9898;</span><span class=\"constant character escape json\"><span>\\n</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;highp&#xA0;float&#xA0;b&#xA0;=&#xA0;78.233;</span><span class=\"constant character escape json\"><span>\\n</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;highp&#xA0;float&#xA0;c&#xA0;=&#xA0;43758.5453;</span><span class=\"constant character escape json\"><span>\\n</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;highp&#xA0;float&#xA0;dt=&#xA0;dot(co.xy&#xA0;,vec2(a,b));</span><span class=\"constant character escape json\"><span>\\n</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;highp&#xA0;float&#xA0;sn=&#xA0;mod(dt,3.14);</span><span class=\"constant character escape json\"><span>\\n</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;return&#xA0;fract(sin(sn)&#xA0;*&#xA0;c);</span><span class=\"constant character escape json\"><span>\\n</span></span><span>}</span><span class=\"constant character escape json\"><span>\\n</span><span>\\n</span></span><span>#pragma&#xA0;glslify:&#xA0;export(random)</span><span class=\"punctuation definition string end json\"><span>&quot;</span></span></span><span class=\"punctuation separator dictionary pair json\"><span>,</span></span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure array json\"><span class=\"meta structure dictionary json\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"string quoted double json\"><span class=\"punctuation definition string begin json\"><span>&quot;</span></span><span>entry</span><span class=\"punctuation definition string end json\"><span>&quot;</span></span></span><span class=\"meta structure dictionary value json\"><span class=\"punctuation separator dictionary key-value json\"><span>:</span></span><span>&#xA0;</span><span class=\"constant language json\"><span>false</span></span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure array json\"><span class=\"meta structure dictionary json\"><span class=\"meta structure dictionary value json\"><span>&#xA0;&#xA0;</span></span><span class=\"punctuation definition dictionary end json\"><span>}</span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure array json\"><span class=\"punctuation definition array end json\"><span>]</span></span></span></span></div>\n</code></pre>\n<h2 id=\"transform-api\">Transform API</h2>\n<p>The transform API has changed since glslify 1.0 to make it more &quot;vanilla&quot;.</p>\n<pre><code class=\"lang-javascript\"><div class=\"line\"><span class=\"source js\"><span class=\"meta function js\"><span class=\"support class js\"><span>module</span></span><span>.</span><span class=\"entity name function js\"><span>exports</span></span><span>&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"storage type function js\"><span>function</span></span><span class=\"punctuation definition parameters begin js\"><span>(</span></span><span class=\"variable parameter function js\"><span>file</span></span><span class=\"meta object delimiter js\"><span>,</span></span><span>&#xA0;</span><span class=\"variable parameter function js\"><span>source</span></span><span class=\"meta object delimiter js\"><span>,</span></span><span>&#xA0;</span><span class=\"variable parameter function js\"><span>options</span></span><span class=\"meta object delimiter js\"><span>,</span></span><span>&#xA0;</span><span class=\"variable parameter function js\"><span>done</span></span><span class=\"punctuation definition parameters end js\"><span>)</span></span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;done</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"constant language null js\"><span>null</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;source</span><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js\"><span>toUpperCase</span></span><span class=\"meta brace round js\"><span>(</span><span>)</span><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta brace curly js\"><span>}</span></span></span></div>\n</code></pre>\n<p>As an example, here&apos;s <a href=\"http://github.com/hughsk/glslify-hex\">glslify-hex</a>\nrewritten using the new API:</p>\n<pre><code class=\"lang-javascript\"><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;through&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>through</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;regexLong&#xA0;&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span class=\"string regexp js\"><span>&#xA0;</span><span class=\"punctuation definition string begin js\"><span>/</span></span><span>#</span><span class=\"meta group regexp\"><span class=\"punctuation definition group regexp\"><span>(</span></span><span class=\"constant other character-class set regexp\"><span class=\"punctuation definition character-class regexp\"><span>[</span></span><span class=\"constant other character-class range regexp\"><span>a-f</span><span>0-9</span></span><span class=\"punctuation definition character-class regexp\"><span>]</span></span></span><span class=\"keyword operator quantifier regexp\"><span>{2}</span></span><span class=\"punctuation definition group regexp\"><span>)</span><span>(</span></span><span class=\"constant other character-class set regexp\"><span class=\"punctuation definition character-class regexp\"><span>[</span></span><span class=\"constant other character-class range regexp\"><span>a-f</span><span>0-9</span></span><span class=\"punctuation definition character-class regexp\"><span>]</span></span></span><span class=\"keyword operator quantifier regexp\"><span>{2}</span></span><span class=\"punctuation definition group regexp\"><span>)</span><span>(</span></span><span class=\"constant other character-class set regexp\"><span class=\"punctuation definition character-class regexp\"><span>[</span></span><span class=\"constant other character-class range regexp\"><span>a-f</span><span>0-9</span></span><span class=\"punctuation definition character-class regexp\"><span>]</span></span></span><span class=\"keyword operator quantifier regexp\"><span>{2}</span></span><span class=\"punctuation definition group regexp\"><span>)</span><span>(</span></span><span class=\"constant other character-class set regexp\"><span class=\"punctuation definition character-class regexp\"><span>[</span></span><span class=\"constant other character-class range regexp\"><span>a-f</span><span>0-9</span></span><span class=\"punctuation definition character-class regexp\"><span>]</span></span></span><span class=\"keyword operator quantifier regexp\"><span>{2}</span></span><span class=\"punctuation definition group regexp\"><span>)</span></span></span><span class=\"keyword operator quantifier regexp\"><span>?</span></span><span class=\"punctuation definition string end js\"><span>/</span></span><span>gi</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;regexShort&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span class=\"string regexp js\"><span>&#xA0;</span><span class=\"punctuation definition string begin js\"><span>/</span></span><span>#</span><span class=\"meta group regexp\"><span class=\"punctuation definition group regexp\"><span>(</span></span><span class=\"constant other character-class set regexp\"><span class=\"punctuation definition character-class regexp\"><span>[</span></span><span class=\"constant other character-class range regexp\"><span>a-f</span><span>0-9</span></span><span class=\"punctuation definition character-class regexp\"><span>]</span></span></span><span class=\"punctuation definition group regexp\"><span>)</span><span>(</span></span><span class=\"constant other character-class set regexp\"><span class=\"punctuation definition character-class regexp\"><span>[</span></span><span class=\"constant other character-class range regexp\"><span>a-f</span><span>0-9</span></span><span class=\"punctuation definition character-class regexp\"><span>]</span></span></span><span class=\"punctuation definition group regexp\"><span>)</span><span>(</span></span><span class=\"constant other character-class set regexp\"><span class=\"punctuation definition character-class regexp\"><span>[</span></span><span class=\"constant other character-class range regexp\"><span>a-f</span><span>0-9</span></span><span class=\"punctuation definition character-class regexp\"><span>]</span></span></span><span class=\"punctuation definition group regexp\"><span>)</span><span>(</span></span><span class=\"constant other character-class set regexp\"><span class=\"punctuation definition character-class regexp\"><span>[</span></span><span class=\"constant other character-class range regexp\"><span>a-f</span><span>0-9</span></span><span class=\"punctuation definition character-class regexp\"><span>]</span></span></span><span class=\"punctuation definition group regexp\"><span>)</span></span></span><span class=\"keyword operator quantifier regexp\"><span>?</span></span><span class=\"punctuation definition string end js\"><span>/</span></span><span>gi</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"support variable js\"><span>module</span></span><span class=\"meta delimiter method period js\"><span>.</span></span><span>exports&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;transform</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span>&#xA0;</span><span class=\"entity name function js\"><span>transform</span></span><span class=\"punctuation definition parameters begin js\"><span>(</span></span><span class=\"variable parameter function js\"><span>filename</span></span><span class=\"meta object delimiter js\"><span>,</span></span><span>&#xA0;</span><span class=\"variable parameter function js\"><span>src</span></span><span class=\"meta object delimiter js\"><span>,</span></span><span>&#xA0;</span><span class=\"variable parameter function js\"><span>opts</span></span><span class=\"meta object delimiter js\"><span>,</span></span><span>&#xA0;</span><span class=\"variable parameter function js\"><span>done</span></span><span class=\"punctuation definition parameters end js\"><span>)</span></span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;src&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;src</span><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js\"><span>replace</span></span><span class=\"meta brace round js\"><span>(</span></span><span>regexShort</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span class=\"punctuation definition parameters begin js\"><span>(</span></span><span class=\"variable parameter function js\"><span>whole</span></span><span class=\"meta object delimiter js\"><span>,</span></span><span>&#xA0;</span><span class=\"variable parameter function js\"><span>r</span></span><span class=\"meta object delimiter js\"><span>,</span></span><span>&#xA0;</span><span class=\"variable parameter function js\"><span>g</span></span><span class=\"meta object delimiter js\"><span>,</span></span><span>&#xA0;</span><span class=\"variable parameter function js\"><span>b</span></span><span class=\"meta object delimiter js\"><span>,</span></span><span>&#xA0;</span><span class=\"variable parameter function js\"><span>a</span></span><span class=\"punctuation definition parameters end js\"><span>)</span></span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"keyword control js\"><span>return</span></span><span>&#xA0;</span><span class=\"keyword operator logical js\"><span>!</span></span><span>a</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"keyword operator js\"><span>?</span></span><span>&#xA0;</span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>#</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span>&#xA0;</span><span class=\"keyword operator js\"><span>+</span></span><span>&#xA0;r&#xA0;</span><span class=\"keyword operator js\"><span>+</span></span><span>&#xA0;r&#xA0;</span><span class=\"keyword operator js\"><span>+</span></span><span>&#xA0;g&#xA0;</span><span class=\"keyword operator js\"><span>+</span></span><span>&#xA0;g&#xA0;</span><span class=\"keyword operator js\"><span>+</span></span><span>&#xA0;b&#xA0;</span><span class=\"keyword operator js\"><span>+</span></span><span>&#xA0;b</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>#</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span>&#xA0;</span><span class=\"keyword operator js\"><span>+</span></span><span>&#xA0;r&#xA0;</span><span class=\"keyword operator js\"><span>+</span></span><span>&#xA0;r&#xA0;</span><span class=\"keyword operator js\"><span>+</span></span><span>&#xA0;g&#xA0;</span><span class=\"keyword operator js\"><span>+</span></span><span>&#xA0;g&#xA0;</span><span class=\"keyword operator js\"><span>+</span></span><span>&#xA0;b&#xA0;</span><span class=\"keyword operator js\"><span>+</span></span><span>&#xA0;b&#xA0;</span><span class=\"keyword operator js\"><span>+</span></span><span>&#xA0;a&#xA0;</span><span class=\"keyword operator js\"><span>+</span></span><span>&#xA0;a</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta brace curly js\"><span>}</span></span><span class=\"meta brace round js\"><span>)</span></span><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js\"><span>replace</span></span><span class=\"meta brace round js\"><span>(</span></span><span>regexLong</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span class=\"punctuation definition parameters begin js\"><span>(</span></span><span class=\"variable parameter function js\"><span>whole</span></span><span class=\"meta object delimiter js\"><span>,</span></span><span>&#xA0;</span><span class=\"variable parameter function js\"><span>r</span></span><span class=\"meta object delimiter js\"><span>,</span></span><span>&#xA0;</span><span class=\"variable parameter function js\"><span>g</span></span><span class=\"meta object delimiter js\"><span>,</span></span><span>&#xA0;</span><span class=\"variable parameter function js\"><span>b</span></span><span class=\"meta object delimiter js\"><span>,</span></span><span>&#xA0;</span><span class=\"variable parameter function js\"><span>a</span></span><span class=\"punctuation definition parameters end js\"><span>)</span></span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;r&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;makeFloat</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"support function js\"><span>parseInt</span></span><span class=\"meta brace round js\"><span>(</span></span><span>r</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>16</span></span><span class=\"meta brace round js\"><span>)</span></span><span>&#xA0;</span><span class=\"keyword operator js\"><span>/</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>255</span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;g&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;makeFloat</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"support function js\"><span>parseInt</span></span><span class=\"meta brace round js\"><span>(</span></span><span>g</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>16</span></span><span class=\"meta brace round js\"><span>)</span></span><span>&#xA0;</span><span class=\"keyword operator js\"><span>/</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>255</span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;b&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;makeFloat</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"support function js\"><span>parseInt</span></span><span class=\"meta brace round js\"><span>(</span></span><span>b</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>16</span></span><span class=\"meta brace round js\"><span>)</span></span><span>&#xA0;</span><span class=\"keyword operator js\"><span>/</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>255</span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;a&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;makeFloat</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"support function js\"><span>parseInt</span></span><span class=\"meta brace round js\"><span>(</span></span><span>a</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>16</span></span><span class=\"meta brace round js\"><span>)</span></span><span>&#xA0;</span><span class=\"keyword operator js\"><span>/</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>255</span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"keyword control js\"><span>return</span></span><span>&#xA0;</span><span class=\"support function js\"><span>isNaN</span></span><span class=\"meta brace round js\"><span>(</span></span><span>a</span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"keyword operator js\"><span>?</span></span><span>&#xA0;</span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>vec3(</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"keyword operator js\"><span>+</span></span><span class=\"meta brace square js\"><span>[</span></span><span>r</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>g</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>b</span><span class=\"meta brace square js\"><span>]</span></span><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js\"><span>join</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>,</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span><span class=\"keyword operator js\"><span>+</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>)</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>vec4(</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"keyword operator js\"><span>+</span></span><span class=\"meta brace square js\"><span>[</span></span><span>r</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>g</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>b</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>a</span><span class=\"meta brace square js\"><span>]</span></span><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js\"><span>join</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>,</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span><span class=\"keyword operator js\"><span>+</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>)</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta brace curly js\"><span>}</span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;done</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"constant language null js\"><span>null</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;src</span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta brace curly js\"><span>}</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta function js\"><span class=\"storage type function js\"><span>function</span></span><span>&#xA0;</span><span class=\"entity name function js\"><span>makeFloat</span></span><span class=\"punctuation definition parameters begin js\"><span>(</span></span><span class=\"variable parameter function js\"><span>n</span></span><span class=\"punctuation definition parameters end js\"><span>)</span></span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"keyword control js\"><span>return</span></span><span>&#xA0;</span><span class=\"support class js\"><span>String</span></span><span class=\"meta brace round js\"><span>(</span></span><span>n</span><span class=\"meta brace round js\"><span>)</span></span><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js\"><span>indexOf</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>.</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span><span>&#xA0;</span><span class=\"keyword operator comparison js\"><span>===</span></span><span>&#xA0;</span><span class=\"keyword operator js\"><span>-</span></span><span class=\"constant numeric js\"><span>1</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"keyword operator js\"><span>?</span></span><span>&#xA0;n&#xA0;</span><span class=\"keyword operator js\"><span>+</span></span><span>&#xA0;</span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>.</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;n</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta brace curly js\"><span>}</span></span></span></div>\n</code></pre>\n<h2 id=\"transforms-in-package-json-\">Transforms in <code>package.json</code></h2>\n<p>Transforms now support options specified in <code>package.json</code>:</p>\n<pre><code class=\"lang-json\"><div class=\"line\"><span class=\"source json\"><span class=\"meta structure dictionary json\"><span class=\"punctuation definition dictionary begin json\"><span>{</span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure dictionary json\"><span>&#xA0;&#xA0;</span><span class=\"string quoted double json\"><span class=\"punctuation definition string begin json\"><span>&quot;</span></span><span>glslify</span><span class=\"punctuation definition string end json\"><span>&quot;</span></span></span><span class=\"meta structure dictionary value json\"><span class=\"punctuation separator dictionary key-value json\"><span>:</span></span><span>&#xA0;</span><span class=\"meta structure dictionary json\"><span class=\"punctuation definition dictionary begin json\"><span>{</span></span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure dictionary json\"><span class=\"meta structure dictionary value json\"><span class=\"meta structure dictionary json\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"string quoted double json\"><span class=\"punctuation definition string begin json\"><span>&quot;</span></span><span>transform</span><span class=\"punctuation definition string end json\"><span>&quot;</span></span></span><span class=\"meta structure dictionary value json\"><span class=\"punctuation separator dictionary key-value json\"><span>:</span></span><span>&#xA0;</span><span class=\"meta structure array json\"><span class=\"punctuation definition array begin json\"><span>[</span></span></span></span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure dictionary json\"><span class=\"meta structure dictionary value json\"><span class=\"meta structure dictionary json\"><span class=\"meta structure dictionary value json\"><span class=\"meta structure array json\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"string quoted double json\"><span class=\"punctuation definition string begin json\"><span>&quot;</span></span><span>glslify-hex</span><span class=\"punctuation definition string end json\"><span>&quot;</span></span></span><span class=\"punctuation separator array json\"><span>,</span></span></span></span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure dictionary json\"><span class=\"meta structure dictionary value json\"><span class=\"meta structure dictionary json\"><span class=\"meta structure dictionary value json\"><span class=\"meta structure array json\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"meta structure array json\"><span class=\"punctuation definition array begin json\"><span>[</span></span><span class=\"string quoted double json\"><span class=\"punctuation definition string begin json\"><span>&quot;</span></span><span>glslify-optimize</span><span class=\"punctuation definition string end json\"><span>&quot;</span></span></span><span class=\"punctuation separator array json\"><span>,</span></span><span>&#xA0;</span><span class=\"meta structure dictionary json\"><span class=\"punctuation definition dictionary begin json\"><span>{</span></span><span>&#xA0;</span><span class=\"string quoted double json\"><span class=\"punctuation definition string begin json\"><span>&quot;</span></span><span>mangle</span><span class=\"punctuation definition string end json\"><span>&quot;</span></span></span><span class=\"meta structure dictionary value json\"><span class=\"punctuation separator dictionary key-value json\"><span>:</span></span><span>&#xA0;</span><span class=\"constant language json\"><span>true</span></span><span>&#xA0;</span></span><span class=\"punctuation definition dictionary end json\"><span>}</span></span></span><span class=\"punctuation definition array end json\"><span>]</span></span></span></span></span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure dictionary json\"><span class=\"meta structure dictionary value json\"><span class=\"meta structure dictionary json\"><span class=\"meta structure dictionary value json\"><span class=\"meta structure array json\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"punctuation definition array end json\"><span>]</span></span></span></span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure dictionary json\"><span class=\"meta structure dictionary value json\"><span class=\"meta structure dictionary json\"><span class=\"meta structure dictionary value json\"><span>&#xA0;&#xA0;</span></span><span class=\"punctuation definition dictionary end json\"><span>}</span></span></span></span></span></span></div><div class=\"line\"><span class=\"source json\"><span class=\"meta structure dictionary json\"><span class=\"punctuation definition dictionary end json\"><span>}</span></span></span></span></div>\n</code></pre>\n"}
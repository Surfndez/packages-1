{"readme":"<h1 class=\"title\"><a target=\"_blank\" href=\"https://github.com/wwwtyro/gl-render-cubemap\">gl-render-cubemap</a><div class=\"contrib\"></div></h1>\n<p>Renders a scene into a cubemap.</p>\n<h2 id=\"install\">Install</h2>\n<pre><code class=\"lang-sh\"><div class=\"line\"><span class=\"source shell\"><span>npm&#xA0;install&#xA0;gl-render-cubemap</span></span></div>\n</code></pre>\n<h2 id=\"example\">Example</h2>\n<pre><code class=\"lang-js\"><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;mat4&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>gl-mat4</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;Geometry&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>gl-geometry</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;glShader&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>gl-shader</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;glslify&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>glslify</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;createTextureCube&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>gl-texture-cube</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;renderCubemap&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>gl-render-cubemap</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;canvases&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;renderCubemap</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"meta brace curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;resolution</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>1024</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta function json js\"><span class=\"entity name function js\"><span>initialize</span></span><span class=\"keyword operator assignment js\"><span>:</span></span><span>&#xA0;</span><span class=\"storage type function js\"><span>function</span></span><span>&#xA0;</span><span class=\"punctuation definition parameters begin js\"><span>(</span></span><span class=\"variable parameter function js\"><span>params</span></span><span class=\"punctuation definition parameters end js\"><span>)</span></span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"keyword control js\"><span>return</span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;program</span><span class=\"keyword operator js\"><span>:</span></span><span>&#xA0;glShader</span><span class=\"meta brace round js\"><span>(</span></span><span>params</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>gl</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;glslify</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>./noise.vert</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;glslify</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>./noise.frag</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"meta brace curly js\"><span>}</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta brace curly js\"><span>}</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta function json js\"><span class=\"entity name function js\"><span>render</span></span><span class=\"keyword operator assignment js\"><span>:</span></span><span>&#xA0;</span><span class=\"storage type function js\"><span>function</span></span><span>&#xA0;</span><span class=\"punctuation definition parameters begin js\"><span>(</span></span><span class=\"variable parameter function js\"><span>params</span></span><span class=\"meta object delimiter js\"><span>,</span></span><span>&#xA0;</span><span class=\"variable parameter function js\"><span>data</span></span><span class=\"punctuation definition parameters end js\"><span>)</span></span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;program&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;data</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>program</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;geometry&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;Geometry</span><span class=\"meta brace round js\"><span>(</span></span><span>params</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>gl</span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>attr</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>aPosition</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;params</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>quad</span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;view&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;mat4</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>create</span><span class=\"meta brace round js\"><span>(</span><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;mat4</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>lookAt</span><span class=\"meta brace round js\"><span>(</span></span><span>view</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"meta brace square js\"><span>[</span></span><span class=\"constant numeric js\"><span>0</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>0</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>0</span></span><span class=\"meta brace square js\"><span>]</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;params</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>forward</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;params</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>up</span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;projection&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;mat4</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>create</span><span class=\"meta brace round js\"><span>(</span><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;mat4</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>perspective</span><span class=\"meta brace round js\"><span>(</span></span><span>projection</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;params</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>fov</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;params</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>aspect</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>0.01</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>10.0</span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;program</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>bind</span><span class=\"meta brace round js\"><span>(</span><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;geometry</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>bind</span><span class=\"meta brace round js\"><span>(</span></span><span>program</span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;program</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>uniforms</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>uView&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;view</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;program</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>uniforms</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>uProjection&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;projection</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;geometry</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>draw</span><span class=\"meta brace round js\"><span>(</span><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta brace curly js\"><span>}</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta brace curly js\"><span>}</span></span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;cubemap&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;createTextureCube</span><span class=\"meta brace round js\"><span>(</span></span><span>gl</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;canvases</span><span class=\"meta brace round js\"><span>)</span></span></span></div>\n</code></pre>\n<h2 id=\"api\">API</h2>\n<pre><code class=\"lang-js\"><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;renderCubemap&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>gl-render-cubemap</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span></span></div>\n</code></pre>\n<h4 id=\"-var-canvases-rendercubemap-params-\"><code>var canvases = renderCubemap(params)</code></h4>\n<p>Returns a set of canvas objects:</p>\n<pre><code>{\n  pos: {\n    x: canvas,\n    y: canvas,\n    z: canvas\n  },\n  neg: {\n    x: canvas,\n    y: canvas,\n    z: canvas\n  }\n}\n</code></pre><p>...which can be immediately consumed by\n<a href=\"https://github.com/wwwtyro/gl-texture-cube\">gl-texture-cube</a>.</p>\n<p>Takes an object <code>params</code>, which must contain the following fields:</p>\n<pre><code>{\n  resolution: integer,\n\n  initialize: function (params) {\n    return {\n      programs, geometries, textures, etc.\n    }\n  },\n\n  render: function (params, data) {}\n}\n</code></pre><p>The <code>resolution</code> parameter defines the resolution of each square face of your cubemap.\nThis should be a power of two in most cases.</p>\n<p>The <code>initialize</code> function is called by <code>renderCubemap</code> when it&apos;s ready for you to\ninitialize your scene. It will be called with an object that contains:</p>\n<pre><code>{\n  gl: the gl context that will be used to render your scene,\n  fov: (float, radians) the field of view you should use in your projection matrix,\n  resolution: (integer) the resolution you provided to renderCubemap,\n  aspect: (float) the aspect ratio you should use in your projection matrix\n}\n</code></pre><p>Use the <code>initialize</code> function to do all the setup for your scene, e.g., load\n<code>glsl</code> programs, create geometries, prepare textures, etc. When you&apos;re done,\nreturn all the state that you&apos;ll need for rendering your scene in an object.\nIn the example above, we create a program and return it for use later in the\n<code>render</code> function.</p>\n<p>The <code>render</code> function is used to render your scene into the cubemap. It is called\nsix times (once for each cubemap face) and is provided with a <code>params</code> and <code>data</code>\nobject. The <code>data</code> object is what you returned from the <code>initialize</code> function, and\nso should contain all the objects you need to render your scene, like your programs,\ngeometries, textures, etc.</p>\n<p>The <code>params</code> object contains the following fields:</p>\n<pre><code>{\n  gl: the gl context that will be used to render your scene,\n  fov: (float, radians) the field of view you should use in your projection matrix,\n  resolution: (integer) the resolution you provided to renderCubemap,\n  aspect: (float) the aspect ratio you should use in your projection matrix,\n  forward: (vec3) the direction you should set your view matrix to face,\n  up: (vec3) the up direction for your view matrix,\n  quad: (flat position array) a convenience geometry for rendering with raycasting techniques\n}\n</code></pre><p>With the exception of <code>quad</code>, most of the above should be pretty clear.\nThe <code>quad</code> object is a flat array of positions that represent the face\nof the cubemap being rendered. You can use this to create a\n<a href=\"https://github.com/hughsk/gl-geometry\">gl-geometry</a> for use in your\n<code>glsl</code> program to easily calculate a ray from the origin into your\nscene.</p>\n<p>This pattern is used in the included starfield example:</p>\n<h4 id=\"javascript\">Javascript</h4>\n<pre><code class=\"lang-js\"><div class=\"line\"><span class=\"source js\"><span class=\"meta function json js\"><span class=\"entity name function js\"><span>render</span></span><span class=\"keyword operator assignment js\"><span>:</span></span><span>&#xA0;</span><span class=\"storage type function js\"><span>function</span></span><span>&#xA0;</span><span class=\"punctuation definition parameters begin js\"><span>(</span></span><span class=\"variable parameter function js\"><span>params</span></span><span class=\"meta object delimiter js\"><span>,</span></span><span>&#xA0;</span><span class=\"variable parameter function js\"><span>data</span></span><span class=\"punctuation definition parameters end js\"><span>)</span></span></span><span>&#xA0;</span><span class=\"meta brace curly js\"><span>{</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;geometry&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;Geometry</span><span class=\"meta brace round js\"><span>(</span></span><span>params</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>gl</span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>attr</span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>aPosition</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;params</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>quad</span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;program</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>bind</span><span class=\"meta brace round js\"><span>(</span><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;geometry</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>bind</span><span class=\"meta brace round js\"><span>(</span></span><span>program</span><span class=\"meta brace round js\"><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;program</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>uniforms</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>uView&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;view</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;program</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>uniforms</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>uProjection&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;projection</span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;geometry</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>draw</span><span class=\"meta brace round js\"><span>(</span><span>)</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta brace curly js\"><span>}</span></span></span></div>\n</code></pre>\n<h4 id=\"vertex-shader\">Vertex Shader</h4>\n<pre><code class=\"lang-glsl\"><div class=\"line\"><span class=\"source glsl\"><span class=\"storage modifier glsl\"><span>attribute</span></span><span>&#xA0;</span><span class=\"storage type glsl\"><span>vec3</span></span><span>&#xA0;aPosition;</span></span></div><div class=\"line\"><span class=\"source glsl\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source glsl\"><span class=\"storage modifier glsl\"><span>uniform</span></span><span>&#xA0;</span><span class=\"storage type glsl\"><span>mat4</span></span><span>&#xA0;uView;</span></span></div><div class=\"line\"><span class=\"source glsl\"><span class=\"storage modifier glsl\"><span>uniform</span></span><span>&#xA0;</span><span class=\"storage type glsl\"><span>mat4</span></span><span>&#xA0;uProjection;</span></span></div><div class=\"line\"><span class=\"source glsl\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source glsl\"><span class=\"storage modifier glsl\"><span>varying</span></span><span>&#xA0;</span><span class=\"storage type glsl\"><span>vec3</span></span><span>&#xA0;vPosition;</span></span></div><div class=\"line\"><span class=\"source glsl\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source glsl\"><span class=\"storage type glsl\"><span>void</span></span><span class=\"meta function c\"><span class=\"punctuation whitespace function leading c\"><span>&#xA0;</span></span><span class=\"entity name function c\"><span>main</span></span><span class=\"meta parens c\"><span class=\"punctuation section parens begin c\"><span>(</span></span><span class=\"punctuation section parens end c\"><span>)</span></span></span><span>&#xA0;</span><span class=\"meta block c\"><span class=\"punctuation section block begin c\"><span>{</span></span></span></span></span></div><div class=\"line\"><span class=\"source glsl\"><span class=\"meta function c\"><span class=\"meta block c\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"support variable glsl\"><span>gl_Position</span></span><span>&#xA0;=&#xA0;uProjection&#xA0;*&#xA0;uView&#xA0;*</span><span class=\"meta function-call c\"><span class=\"punctuation whitespace function-call leading c\"><span>&#xA0;</span></span><span class=\"support function any-method c\"><span>vec4</span></span><span>(</span></span><span>aPosition,&#xA0;</span><span class=\"constant numeric c\"><span>1.0</span></span><span>);</span></span></span></span></div><div class=\"line\"><span class=\"source glsl\"><span class=\"meta function c\"><span class=\"meta block c\"><span>&#xA0;&#xA0;&#xA0;&#xA0;vPosition&#xA0;=&#xA0;aPosition;</span></span></span></span></div><div class=\"line\"><span class=\"source glsl\"><span class=\"meta function c\"><span class=\"meta block c\"><span class=\"punctuation section block end c\"><span>}</span></span></span></span></span></div>\n</code></pre>\n<h4 id=\"fragment-shader\">Fragment Shader</h4>\n<pre><code class=\"lang-glsl\"><div class=\"line\"><span class=\"source glsl\"><span class=\"storage modifier glsl\"><span>varying</span></span><span>&#xA0;</span><span class=\"storage type glsl\"><span>vec3</span></span><span>&#xA0;vPosition;</span></span></div><div class=\"line\"><span class=\"source glsl\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source glsl\"><span class=\"storage type glsl\"><span>void</span></span><span class=\"meta function c\"><span class=\"punctuation whitespace function leading c\"><span>&#xA0;</span></span><span class=\"entity name function c\"><span>main</span></span><span class=\"meta parens c\"><span class=\"punctuation section parens begin c\"><span>(</span></span><span class=\"punctuation section parens end c\"><span>)</span></span></span><span>&#xA0;</span><span class=\"meta block c\"><span class=\"punctuation section block begin c\"><span>{</span></span></span></span></span></div><div class=\"line\"><span class=\"source glsl\"><span class=\"meta function c\"><span class=\"meta block c\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"storage type glsl\"><span>vec3</span></span><span>&#xA0;p&#xA0;=</span><span class=\"meta function-call c\"><span class=\"punctuation whitespace function-call leading c\"><span>&#xA0;</span></span><span class=\"support function any-method c\"><span>normalize</span></span><span>(</span></span><span>vPosition);&#xA0;</span><span class=\"comment line double-slash c++\"><span class=\"punctuation definition comment c++\"><span>//</span></span><span>&#xA0;&lt;--&#xA0;This&#xA0;is&#xA0;the&#xA0;ray&#xA0;direction</span><span>&#xA0;</span></span></span></span></span></div><div class=\"line\"><span class=\"source glsl\"><span class=\"meta function c\"><span class=\"meta block c\"><span class=\"punctuation whitespace comment leading c++\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span></span><span class=\"comment line double-slash c++\"><span class=\"punctuation definition comment c++\"><span>//</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;derived&#xA0;from&#xA0;the&#xA0;quad&#xA0;geometry.</span><span>&#xA0;</span></span></span></span></span></div><div class=\"line\"><span class=\"source glsl\"><span class=\"meta function c\"><span class=\"meta block c\"><span>&#xA0;</span></span></span></span></div><div class=\"line\"><span class=\"source glsl\"><span class=\"meta function c\"><span class=\"meta block c\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"storage type glsl\"><span>float</span></span><span>&#xA0;n&#xA0;=&#xA0;</span><span class=\"constant numeric c\"><span>0.5</span></span><span>&#xA0;*</span><span class=\"meta function-call c\"><span class=\"punctuation whitespace function-call leading c\"><span>&#xA0;</span></span><span class=\"support function any-method c\"><span>snoise3</span></span><span>(</span></span><span>p&#xA0;*&#xA0;</span><span class=\"constant numeric c\"><span>128.0</span></span><span>)&#xA0;+&#xA0;</span><span class=\"constant numeric c\"><span>0.5</span></span><span>;</span></span></span></span></div><div class=\"line\"><span class=\"source glsl\"><span class=\"meta function c\"><span class=\"meta block c\"><span>&#xA0;&#xA0;&#xA0;&#xA0;n&#xA0;=</span><span class=\"punctuation whitespace support function leading c\"><span>&#xA0;</span></span><span class=\"support function C99 c\"><span>pow</span></span><span>(n,&#xA0;</span><span class=\"constant numeric c\"><span>24.0</span></span><span>);</span></span></span></span></div><div class=\"line\"><span class=\"source glsl\"><span class=\"meta function c\"><span class=\"meta block c\"><span>&#xA0;&#xA0;&#xA0;&#xA0;</span><span class=\"support variable glsl\"><span>gl_FragColor</span></span><span>&#xA0;=</span><span class=\"meta function-call c\"><span class=\"punctuation whitespace function-call leading c\"><span>&#xA0;</span></span><span class=\"support function any-method c\"><span>vec4</span></span><span>(</span></span><span>n*</span><span class=\"constant numeric c\"><span>0.5</span></span><span>,n*</span><span class=\"constant numeric c\"><span>0.75</span></span><span>,n,&#xA0;</span><span class=\"constant numeric c\"><span>1.0</span></span><span>);</span></span></span></span></div><div class=\"line\"><span class=\"source glsl\"><span class=\"meta function c\"><span class=\"meta block c\"><span class=\"punctuation section block end c\"><span>}</span></span></span></span></span></div>\n</code></pre>\n"}
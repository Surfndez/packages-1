{"readme":"<h1 class=\"title\"><a target=\"_blank\" href=\"https://github.com/tmpvar/ray-aabb\">ray-aabb</a><div class=\"contrib\"></div></h1>\n<p>test if a ray intersects an aabb in 2d/3d space</p>\n<p>Implemented via the techniques described in <a href=\"http://www.cg.cs.tu-bs.de/publications/Eisemann07FRA/\">Fast Ray/Axis-Aligned Bounding Box Overlap Tests using Ray Slopes</a></p>\n<h2 id=\"install\">install</h2>\n<p><code>npm install ray-aabb</code></p>\n<h2 id=\"use\">use</h2>\n<pre><code class=\"lang-javascript\"><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;createRay&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"support function js\"><span>require</span></span><span class=\"meta brace round js\"><span>(</span></span><span class=\"string quoted single js\"><span class=\"punctuation definition string begin js\"><span>&apos;</span></span><span>ray-aabb</span><span class=\"punctuation definition string end js\"><span>&apos;</span></span></span><span class=\"meta brace round js\"><span>)</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"comment block js\"><span class=\"punctuation definition comment js\"><span>/*</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"comment block js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;+------+</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"comment block js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;/&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;/|</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"comment block js\"><span>(-1,&#xA0;1,&#xA0;0)&#xA0;----&gt;&#xA0;&#xA0;+------+&#xA0;|</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"comment block js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;|&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;|&#xA0;+</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"comment block js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;|&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;|/</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"comment block js\"><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;+------+</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"comment block js\"><span class=\"punctuation definition comment js\"><span>*/</span></span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;ray_origin&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"meta brace square js\"><span>[</span></span><span class=\"keyword operator js\"><span>-</span></span><span class=\"constant numeric js\"><span>1</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>1</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>0</span></span><span class=\"meta brace square js\"><span>]</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;ray_direction&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"meta brace square js\"><span>[</span></span><span class=\"constant numeric js\"><span>1</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>0</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>0</span></span><span class=\"meta brace square js\"><span>]</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;ray&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;createRay</span><span class=\"meta brace round js\"><span>(</span></span><span>ray_origin</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;ray_direction</span><span class=\"meta brace round js\"><span>)</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;box&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"meta brace square js\"><span>[</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta brace square js\"><span>[</span></span><span class=\"constant numeric js\"><span>0</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>0</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>0</span></span><span class=\"meta brace square js\"><span>]</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;&#xA0;</span><span class=\"meta brace square js\"><span>[</span></span><span class=\"constant numeric js\"><span>2</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>2</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>2</span></span><span class=\"meta brace square js\"><span>]</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"meta brace square js\"><span>]</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"entity name type object js console\"><span>console</span></span><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js console\"><span>log</span></span><span class=\"meta brace round js\"><span>(</span></span><span>ray</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>intersects</span><span class=\"meta brace round js\"><span>(</span></span><span>box</span><span class=\"meta brace round js\"><span>)</span><span>)</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>&#xA0;outputs:&#xA0;true</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>&#xA0;avoid&#xA0;allocating&#xA0;new&#xA0;memory&#xA0;by&#xA0;reusing&#xA0;rays</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>ray</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>update</span><span class=\"meta brace round js\"><span>(</span></span><span>ray_origin</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"meta brace square js\"><span>[</span></span><span class=\"keyword operator js\"><span>-</span></span><span class=\"constant numeric js\"><span>1</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>0</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>0</span></span><span class=\"meta brace square js\"><span>]</span></span><span class=\"meta brace round js\"><span>)</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"entity name type object js console\"><span>console</span></span><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js console\"><span>log</span></span><span class=\"meta brace round js\"><span>(</span></span><span>ray</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>intersects</span><span class=\"meta brace round js\"><span>(</span></span><span>box</span><span class=\"meta brace round js\"><span>)</span><span>)</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>&#xA0;outputs:&#xA0;false</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;normal&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;</span><span class=\"meta brace square js\"><span>[</span></span><span class=\"constant numeric js\"><span>0</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>0</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"constant numeric js\"><span>0</span></span><span class=\"meta brace square js\"><span>]</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"storage modifier js\"><span>var</span></span><span>&#xA0;d&#xA0;</span><span class=\"keyword operator assignment js\"><span>=</span></span><span>&#xA0;ray</span><span class=\"meta delimiter method period js\"><span>.</span></span><span>intersects</span><span class=\"meta brace round js\"><span>(</span></span><span>box</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;normal</span><span class=\"meta brace round js\"><span>)</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"entity name type object js console\"><span>console</span></span><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js console\"><span>log</span></span><span class=\"meta brace round js\"><span>(</span></span><span>d</span><span class=\"meta brace round js\"><span>)</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>&#xA0;outputs:&#xA0;1</span><span>&#xA0;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span>&#xA0;</span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"entity name type object js console\"><span>console</span></span><span class=\"meta delimiter method period js\"><span>.</span></span><span class=\"support function js console\"><span>log</span></span><span class=\"meta brace round js\"><span>(</span></span><span>normal</span><span class=\"meta brace round js\"><span>)</span></span><span class=\"punctuation terminator statement js\"><span>;</span></span></span></div><div class=\"line\"><span class=\"source js\"><span class=\"comment line double-slash js\"><span class=\"punctuation definition comment js\"><span>//</span></span><span>&#xA0;outputs:&#xA0;[&#xA0;-1,&#xA0;0,&#xA0;0&#xA0;]</span><span>&#xA0;</span></span></span></div>\n</code></pre>\n<h2 id=\"api-surface\">api surface</h2>\n<p>all vectors specified are arrays in the format: <code>[x, y, z]</code> with <code>z</code> being optional for 2d vectors</p>\n<p><strong>createRay</strong>(<code>ray_origin</code>, <code>ray_direction</code>)</p>\n<p><em>parameters</em>:</p>\n<ul>\n<li><code>ray_origin</code> - a vector defining the ray origin</li>\n<li><code>ray_direction</code> - a <em>normalized</em> vector defining the ray direction\n<em>returns</em>: a <code>Ray</code> instance</li>\n</ul>\n<hr>\n<p><strong>Ray#update</strong>(<code>ray_origin</code>, <code>ray_direction</code>)</p>\n<p>Allows <code>Ray</code> instances to be reused by precomputing ray classification.  The intention here is that you will be casting a ray against <strong>many</strong> aabbs</p>\n<p><em>parameters</em>: same as <strong>createRay</strong></p>\n<p><em>returns</em>: <code>this</code> (e.g. <code>ray.update(ro, rd).intersects(box)</code></p>\n<hr>\n<p><strong>Ray#intersects</strong>(<code>aabb</code>[, <code>normal</code>])\nwhere <code>aabb</code> specifies the corners of the bounding box:</p>\n<pre><code class=\"lang-javascript\"><div class=\"line\"><span class=\"source js\"><span class=\"meta brace square js\"><span>[</span><span>[</span></span><span>x1</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;y1</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;z1</span><span class=\"meta brace square js\"><span>]</span></span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;</span><span class=\"meta brace square js\"><span>[</span></span><span>x2</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;y2</span><span class=\"meta delimiter object comma js\"><span>,</span></span><span>&#xA0;z2</span><span class=\"meta brace square js\"><span>]</span><span>]</span></span></span></div>\n</code></pre>\n<p>and the optional <code>normal</code> argument is a 2d/3d vector (e.g., <code>[0, 0]</code>) that will be populated with the <em>non-normalized</em> normal of the corner/edge/face that the ray intersected with.</p>\n<p><em>returns</em></p>\n<p>if <code>normal</code> is not passed</p>\n<ul>\n<li><code>true</code> if intersection detected</li>\n<li><code>false</code> if no intersection</li>\n</ul>\n<p>if <code>normal</code> is passed:</p>\n<ul>\n<li><code>false</code> if no intersection or a number denoting how far along the ray the collision occurred. You can use this number to compute the point of intersection. See the demos for example usage.</li>\n</ul>\n<h2 id=\"platforms\">platforms</h2>\n<p>node and evergreen browsers using <a href=\"http://github.com/tmpvar/ray-aabb/blob/master/browserify.io\">browserify</a></p>\n<h2 id=\"demos\">Demos</h2>\n<h3 id=\"2d\">2d</h3>\n<p><img src=\"http://i.imgur.com/oo3nYo2.png\" alt=\"random-ray\"></p>\n<p><code>npm run demo-2d</code></p>\n<h3 id=\"3d-software-raytracer-\">3d (software raytracer)</h3>\n<p><img src=\"http://imgur.com/6tjoDEa.png\" alt=\"random-ray\"></p>\n<p><code>npm run demo-raytracer</code></p>\n<h2 id=\"license\">license</h2>\n<p><a href=\"http://github.com/tmpvar/ray-aabb/blob/master/LICENSE.txt\">MIT</a></p>\n"}